import{d as p,e as h,r as g,u as y,b as j,j as e,h as d,s as b}from"./app-Ct2POXjA.js";import{n as m}from"./index-WhrsqoUh.js";import{D as v}from"./drawer-section-CoX13Zr6.js";import{I as l}from"./input-D6n53HTu.js";import{F as N}from"./XMarkIcon-C1vKr6Aa.js";import{s as u}from"./index-Bv9DtC21.js";function w(a){try{return p.post("/api/expense",a)}catch{}}function _(){try{return p.get("/api/expense"+window.location.search)}catch{}}function k(a){return async function(t,o){await w(a)}}function z(){return async function(a){try{const t=await _();console.log("resres",t.data),a(h.actions.setExpenses(t.data.result))}catch(t){console.error("Error fetching expenses:",t)}}}function C({open:a,setOpenExpenses:t}){const[o,x]=g.useState(!1),{expense:s}=y(n=>n.expenses),c=j();function r(n,i){c(typeof n=="string"?d({...s,[n]:i}):d({...s,[n.target.name]:n.target.value}))}async function f(n){n.preventDefault(),x(!0);const i=new FormData;i.append("item",s.item??""),i.append("cost",s.cost??""),i.append("qty",s.qty??""),i.append("date",s.date??"");try{await b.dispatch(k(i)),u.success("Expense successfully saved!"),t(!1),c(d({}))}catch{u.error("Failed to add Expense. Please try again.")}finally{x(!1)}}return e.jsx(e.Fragment,{children:e.jsx(v,{open:a,setOpen:t,children:e.jsxs("form",{onSubmit:f,className:"flex h-full flex-col divide-gray-200 bg-white shadow-xl",children:[e.jsxs("div",{className:"h-0 flex-1 overflow-y-auto",children:[e.jsxs("div",{className:"bg-pink-200 px-4 py-6 sm:px-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-base font-semibold text-pink-600",children:[e.jsx(m,{className:"float-left mr-1 mt-1"}),"New Expense"]}),e.jsx("div",{className:"ml-3 flex h-7 items-center",children:e.jsxs("button",{type:"button",onClick:()=>t(!1),className:"relative rounded-md bg-pink-200 text-gray-400 hover:text-gray-600 focus:ring-2 focus:ring-white focus:outline-hidden",children:[e.jsx("span",{className:"absolute -inset-2.5"}),e.jsx("span",{className:"sr-only",children:"Close panel"}),e.jsx(N,{"aria-hidden":"true",className:"size-6"})]})})]}),e.jsx("div",{className:"mt-1",children:e.jsx("p",{className:"text-sm text-gray-600",children:"Get started by filling in the information below to add new expense."})})]}),e.jsx("div",{className:"flex flex-1 flex-col justify-between",children:e.jsx("div",{className:"divide-y divide-gray-200 px-4 sm:px-6",children:e.jsxs("div",{className:"space-y-6 pt-6 pb-5",children:[e.jsxs("div",{className:"sm:col-span-12",children:[e.jsx(m,{className:"float-left size-5 mr-1 mt-3 text-pink-500"}),e.jsx("h3",{className:"text-base font-medium text-gray-600 pt-3",children:"Expense Information"}),e.jsx("hr",{})]}),e.jsx("div",{children:e.jsx(l,{onChange:r,value:(s==null?void 0:s.item)??"",name:"item",label:"Purchased Item",type:"text"})}),e.jsx("div",{children:e.jsx(l,{onChange:r,value:(s==null?void 0:s.cost)??"",name:"cost",label:"Cost",type:"text"})}),e.jsx("div",{children:e.jsx(l,{onChange:r,value:(s==null?void 0:s.qty)??"",name:"qty",label:"Quantity",type:"text"})}),e.jsx("div",{children:e.jsx(l,{onChange:r,value:(s==null?void 0:s.date)??"",name:"date",label:"Purcased Date",type:"date"})})]})})})]}),e.jsxs("div",{className:"flex shrink-0 justify-end px-4 py-4",children:[e.jsx("button",{type:"button",onClick:()=>t(!1),className:"rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-xs ring-1 ring-gray-300 ring-inset hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:o,className:"ml-4 inline-flex justify-center rounded-md bg-pink-500 px-3 py-2 text-sm font-semibold text-white shadow-xs hover:bg-pink-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-pink-600",children:o?"Loading...":"Submit"})]})]})})})}const A=Object.freeze(Object.defineProperty({__proto__:null,default:C},Symbol.toStringTag,{value:"Module"}));export{C as A,A as a,z as g};
