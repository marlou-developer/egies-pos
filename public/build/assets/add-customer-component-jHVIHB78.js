import{r as x,u as b,a as j,j as e,t as m,s as h}from"./app-_4OLlqC-.js";import{j as N,k as w}from"./index-ByBl8xpT.js";import{D as C}from"./drawer-section-CC9IC1Yb.js";import{I as n}from"./input-CqEbDxdg.js";import{c as k,a as _}from"./customer-thunk-DGwlsZQZ.js";import{F as S}from"./XMarkIcon-BggDpysJ.js";import{s as f}from"./index-BcvYnzTf.js";import"./transition-B-Uxs1wG.js";import"./useZIndex-BsH0NPlR.js";import"./index-CG9rKuyd.js";import"./index-BIfExDrV.js";import"./UnstableContext-DI5J5Zr_.js";import"./useCSSVarCls-BpZhDJNP.js";import"./asyncToGenerator-CzIkfrrq.js";import"./KeyCode-C40MO73N.js";function Q({open:u,setOpenCustomer:r}){const[p,c]=x.useState(!1),[o,F]=x.useState(null),{customer:a}=b(i=>i.customers),d=j();function t(i,s){d(typeof i=="string"?m({...a,[i]:s}):m({...a,[i.target.name]:i.target.value}))}async function g(i){i.preventDefault(),c(!0);const s=new FormData;s.append("customer_id",a.id??""),s.append("file_name",a.file_name??""),s.append("name",a.name??""),s.append("street",a.street??""),s.append("brgy",a.brgy??""),s.append("city",a.city??""),s.append("province",a.province??""),s.append("postal",a.postal??""),s.append("mobile_no",a.mobile_no??""),s.append("email",a.email??""),o&&o.length>0&&Array.from(o).forEach(l=>{s.append("uploads[]",l)});try{await h.dispatch(k(s));const l=new URLSearchParams(window.location.search),v=l.get("page")||1,y=l.get("search")||"";await h.dispatch(_({page:v,search:y,per_page:10})),f.success("Customer successfully saved!"),r(!1),d(m({}))}catch{f.error("Failed to add Customer. Please try again.")}finally{c(!1)}}return e.jsx(e.Fragment,{children:e.jsx(C,{open:u,setOpen:r,children:e.jsxs("form",{onSubmit:g,className:"flex h-full flex-col divide-y divide-gray-200 bg-white shadow-xl",children:[e.jsxs("div",{className:"h-0 flex-1 overflow-y-auto",children:[e.jsxs("div",{className:"bg-pink-200 px-4 py-6 sm:px-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-base font-semibold text-pink-600",children:[e.jsx(N,{className:"float-left mr-1 mt-1"}),"New Customer"]}),e.jsx("div",{className:"ml-3 flex h-7 items-center",children:e.jsxs("button",{type:"button",onClick:()=>r(!1),className:"relative rounded-md bg-pink-200 text-gray-400 hover:text-gray-600 focus:ring-2 focus:ring-white focus:outline-hidden",children:[e.jsx("span",{className:"absolute -inset-2.5"}),e.jsx("span",{className:"sr-only",children:"Close panel"}),e.jsx(S,{"aria-hidden":"true",className:"size-6"})]})})]}),e.jsx("div",{className:"mt-1",children:e.jsx("p",{className:"text-sm text-gray-600",children:"Get started by filling in the information below to create your new Customer."})})]}),e.jsx("div",{className:"flex flex-1 flex-col justify-between",children:e.jsx("div",{className:"divide-y divide-gray-200 px-4 sm:px-6",children:e.jsxs("div",{className:"space-y-6 pt-6 pb-5",children:[e.jsxs("div",{className:"sm:col-span-12",children:[e.jsx(w,{className:"float-left size-5 mr-1 mt-3 text-pink-500"}),e.jsx("h3",{className:"text-base font-medium text-gray-600 pt-3",children:"Customer Information"}),e.jsx("hr",{})]}),e.jsx("div",{children:e.jsx(n,{onChange:t,value:(a==null?void 0:a.name)??"",name:"name",label:"Customer Name",type:"text"})}),e.jsx("div",{children:e.jsx(n,{onChange:t,value:(a==null?void 0:a.street)??"",name:"street",label:" Street Address",type:"text"})}),e.jsx("div",{children:e.jsx(n,{onChange:t,value:(a==null?void 0:a.brgy)??"",name:"brgy",label:"Barangay",type:"text"})}),e.jsx("div",{children:e.jsx(n,{onChange:t,value:(a==null?void 0:a.city)??"",name:"city",label:"City",type:"text"})}),e.jsx("div",{children:e.jsx(n,{onChange:t,value:(a==null?void 0:a.province)??"",name:"province",label:"Province",type:"text"})}),e.jsx("div",{children:e.jsx(n,{onChange:t,value:(a==null?void 0:a.postal)??"",name:"postal",label:"Postal Code",type:"text"})}),e.jsx("div",{children:e.jsx(n,{onChange:t,value:(a==null?void 0:a.mobile_no)??"",name:"mobile_no",label:"Mobile No.",type:"number"})}),e.jsx("div",{children:e.jsx(n,{onChange:t,value:(a==null?void 0:a.email)??"",name:"email",label:"Email Address",type:"email"})})]})})})]}),e.jsxs("div",{className:"flex shrink-0 justify-end px-4 py-4",children:[e.jsx("button",{type:"button",onClick:()=>r(!1),className:"rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-xs ring-1 ring-gray-300 ring-inset hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:p,className:"ml-4 inline-flex justify-center rounded-md bg-pink-500 px-3 py-2 text-sm font-semibold text-white shadow-xs hover:bg-pink-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-pink-600",children:p?"Saving...":"Save"})]})]})})})}export{Q as default};
