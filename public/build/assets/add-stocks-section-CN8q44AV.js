import{i as x,a as l,j as e,s as m}from"./app-DqVk6xTd.js";import{p as h}from"./index-DCCn3wdt.js";import{M as g}from"./Modal-1DNeGVlF.js";import{I as c}from"./input-BOxMZJlQ.js";import{g as v}from"./product-thunk-ByFAt8u1.js";import{s as p}from"./index-BGSh2POz.js";import"./index-CVpySRQ8.js";import"./transition-CkN1wtbL.js";import"./dialog-CLXFL4KK.js";import"./portal-DdeLSe4H.js";import"./index-DByw9SCH.js";import"./XMarkIcon-4eXdfjh2.js";import"./useZIndex-DrD_8olQ.js";function y(t){try{return x.post("/api/stock",t)}catch{}}function j(t){return async function(n,o){await y(t)}}function E({data:t}){const[n,o]=l.useState(!1),[i,d]=l.useState("same"),[b,u]=l.useState(!1),[r,a]=l.useState({}),f=async s=>{s.preventDefault(),u(!0);try{await m.dispatch(j({...r,product_id:String(t==null?void 0:t.id),price:i==="same"?t==null?void 0:t.cost:null})),p.success("Successfully added!"),await m.dispatch(v()),o(!1),a({}),d("same")}catch{p.error("Failed to add stock. Please try again.")}finally{u(!1)}};return e.jsxs("div",{children:[e.jsxs("button",{type:"button",onClick:()=>o(!0),className:"relative inline-flex items-center rounded-md bg-pink-100 w-full px-3 py-2 text-sm font-semibold text-gray-900 ring-1 ring-gray-300 ring-inset hover:bg-pink-200 ",children:[e.jsx(h,{className:"mr-1 text-pink-500"}),"Add Stocks"]}),e.jsx(g,{open:n,setOpen:o,children:e.jsxs("form",{onSubmit:f,children:[e.jsxs("div",{className:"mt-6 flex flex-col gap-5",children:[e.jsx("h1",{className:"font-bold text-xl text-pink-500",children:"Add Stock(s)"}),e.jsx("div",{children:e.jsx(c,{onChange:s=>a({...r,date:s.target.value}),value:r.date||"",name:"date",label:"Delivery Date",type:"date"})}),e.jsx("div",{children:e.jsx(c,{onChange:s=>a({...r,delivery_id:s.target.value}),value:r.delivery_id||"",name:"delivery_id",label:"Delivery ID",type:"text"})}),e.jsx("div",{children:e.jsx(c,{onChange:s=>a({...r,quantity:s.target.value}),value:r.quantity||"",name:"quantity",label:"Quantity",type:"number"})}),e.jsx("div",{children:e.jsxs("select",{value:i,onChange:s=>d(s.target.value),className:"w-full rounded-md border-gray-500 text-sm h-11",children:[e.jsx("option",{disabled:!0,selected:!0,children:"Pricing"}),e.jsxs("option",{value:"same",children:["Same cost price =    ₱",parseFloat(t==null?void 0:t.cost).toLocaleString("en-PH",{minimumFractionDigits:2})]}),e.jsx("option",{value:"different",children:"Different cost price"})]})}),i==="different"&&e.jsxs("p",{className:"text-sm text-gray-600",children:["If cost price is different from the current cost price, ",e.jsx("a",{href:"/administrator/products",className:"text-pink-500 underline",children:"Add Product"})," instead."]})]}),e.jsx("div",{className:"mt-3 w-full",children:e.jsx("div",{className:"flex items-center justify-end",children:e.jsx("button",{type:"submit",disabled:i==="different",className:`rounded-md p-2 text-white transition 
        ${i==="different"?"bg-gray-300 cursor-not-allowed":"bg-pink-400 hover:bg-pink-500"}
    `,children:"Add Stock"})})})]})})]})}export{E as default};
