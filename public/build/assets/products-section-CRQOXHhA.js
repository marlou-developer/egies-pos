import{r as t,a as O,u as L,j as e,A as h,B as T}from"./app-Cq0AuCnt.js";import{s as $}from"./product-thunk-Bub50uCx.js";import{v as w,s as z,l as M,w as U,x as q}from"./index-dUoKQ9Qi.js";import G from"./add-products-component-BPCWnRTR.js";import B from"./add-category-component-DXr5eOVW.js";import Y from"./filter-products-component-C4wSfwZe.js";import K from"./product-option-menu-section-P86f-_rv.js";import V from"./search-section-DgranoCH.js";import W from"./print-section-BShh4vU7.js";import X from"./pagination-section-BaPfZLRq.js";import H from"./mobile-card-product-component-Db63iHWP.js";import"./upload-product-section-BCaM8K0m.js";import"./PhotoIcon-2W5Kyt9a.js";import"./XMarkIcon-B9mLEqaq.js";import"./input-CrpJ82mA.js";import"./drawer-section-eRM3yXG6.js";import"./transition-Czpp6Hb7.js";import"./index-Dc3x8paA.js";import"./useZIndex-BUYrruHN.js";import"./index-C63q-Bz2.js";import"./index-CpjxDa_h.js";import"./UnstableContext-_vvgaYls.js";import"./useCSSVarCls-usLYcDrQ.js";import"./asyncToGenerator-rWoozFHB.js";import"./KeyCode-C40MO73N.js";import"./category-thunk-DS-HK9JC.js";import"./edit-category-section-BVOCXG5f.js";import"./Modal-DmmQpYTu.js";import"./dialog-BEKTdCy5.js";import"./portal-DJkb_Wau.js";import"./index-Bl3_QPWu.js";import"./index-C4Nb9652.js";import"./useId-DFt7QKms.js";import"./roundedArrow-C8akhVXn.js";import"./motion-BLCci2GW.js";import"./zoom-KG8_Zq8U.js";import"./PencilIcon-CDo6M8As.js";import"./delete-category-section-Qukm1A6p.js";import"./delete-product-section-D_BDdF8e.js";import"./edit-product-section--ddLLKFh.js";import"./product-image-section-e684DhSP.js";import"./useLocale-BjtfGzik.js";import"./ChevronRightIcon-F4QY2s_k.js";import"./PencilSquareIcon-DIxmRqBG.js";import"./ChevronDownIcon-D2sBmdO4.js";import"./menu-C9dKQfmn.js";import"./floating-ui.dom-2zQQ6a7N.js";import"./react-pdf.browser-Cd3yX_vG.js";import"./modal-BAPbFaem.js";import"./moment-C5S46NFB.js";function Qe(){var j,u;const[J,Q]=t.useState(1),[Z]=t.useState(10),[k,r]=t.useState(!1),[a,o]=t.useState(""),[x,c]=t.useState([]),[n,f]=t.useState(!1),m=O(),{products:l,selectedProducts:d,selectAll:C,loading:S,error:ee}=L(s=>s.products)||{products:{data:[],total:0,last_page:1}},[P,y]=t.useState(!1),[D,g]=t.useState(!1),[F,b]=t.useState(!1);t.useEffect(()=>{const i=new URLSearchParams(window.location.search).get("search");i&&o(i)},[]);const N=async()=>{if(a.trim()){f(!0);try{const s=await $(a.trim());c(s.data.data||[])}catch(s){console.error("Error searching by product code:",s),c([])}finally{f(!1)}}},_=s=>{r(!1),o(""),c([]),console.log("Selected product:",s)},R=()=>{o(""),c([]),r(!1)};console.log("products",l);const E=({message:s="Loading products..."})=>e.jsxs("div",{className:"flex justify-center items-center h-64",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-2 text-gray-600",children:s})]});return S?e.jsx(E,{}):e.jsxs("div",{className:"px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"sm:flex sm:items-center",children:[e.jsxs("div",{className:"sm:flex-auto",children:[e.jsx(w,{className:"float-left mr-1 mt-1 text-pink-500"}),e.jsx("h1",{className:"text-base font-semibold text-pink-500",children:"Products Section"})]}),e.jsxs("div",{className:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none",children:[e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("button",{type:"button",onClick:()=>y(!0),className:"inline-flex items-center rounded-md bg-pink-100 px-3 py-2 text-sm font-semibold text-gray-900 ring-1 ring-gray-300 ring-inset hover:bg-pink-200 focus:z-10",children:[e.jsx(w,{className:"mr-1 text-pink-500"}),e.jsx("span",{className:"hidden sm:inline",children:"ADD NEW PRODUCT"}),e.jsx("span",{className:"sm:hidden",children:"ADD PRODUCT"})]}),e.jsxs("button",{type:"button",onClick:()=>g(!0),className:"inline-flex items-center rounded-md bg-pink-100 px-3 py-2 text-sm font-semibold text-gray-900 ring-1 ring-gray-300 ring-inset hover:bg-pink-200 focus:z-10",children:[e.jsx(z,{className:"mr-1 text-pink-500"}),e.jsx("span",{className:"hidden sm:inline",children:"ADD CATEGORY"}),e.jsx("span",{className:"sm:hidden",children:"CATEGORY"})]}),e.jsxs("button",{type:"button",onClick:()=>b(!0),className:"inline-flex items-center rounded-md bg-pink-100 px-3 py-2 text-sm font-semibold text-gray-900 ring-1 ring-gray-300 ring-inset hover:bg-pink-50 focus:z-10",children:[e.jsx(M,{className:"mr-1 text-pink-500"}),e.jsx("span",{className:"hidden sm:inline",children:"FILTER PRODUCTS"}),e.jsx("span",{className:"sm:hidden",children:"FILTER"})]})]}),e.jsx(G,{open:P,setOpenProduct:y}),e.jsx(B,{open:D,setOpenCategory:g}),e.jsx(Y,{open:F,setOpenFilter:b})]})]}),e.jsxs("div",{className:"mt-4 flex flex-col space-y-4 sm:flex-row sm:items-center sm:justify-between sm:space-y-0",children:[e.jsx("div",{className:"flex-1 max-w-md",children:e.jsx(V,{})}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx(W,{})})]}),e.jsxs("div",{className:"mt-8 flow-root",children:[e.jsx(H,{data:l,selectedData:d,dispatch:m,setSelectedData:h}),e.jsx("div",{className:"hidden md:block",children:e.jsx("div",{className:"relative  overflow-x-auto sm:-mx-6 lg:-mx-8",children:e.jsx("div",{className:"inline-block min-w-full py-2 align-middle",children:e.jsx("div",{className:"shadow ring-1 ring-black ring-opacity-5 md:rounded-lg",children:e.jsxs("table",{id:"product-table",className:"min-w-full divide-y divide-gray-300",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6",children:e.jsx("input",{type:"checkbox",checked:C,onChange:s=>{const i=s.target.checked;m(T(i)),m(h(i?[...l.all]:[]))}})}),e.jsx("th",{scope:"col",className:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6",children:e.jsxs("div",{className:"flex gap-1 items-center",children:["ID/Code",e.jsx("button",{onClick:()=>r(!0),className:"text-gray-500 hover:text-pink-500 transition-colors",title:"Search by Product Code/ID",children:e.jsx(U,{className:"h-4"})})]})}),e.jsx("th",{scope:"col",className:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6",children:"Product"}),e.jsx("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Brand"}),e.jsx("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Delivery Receipt"}),e.jsx("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Category"}),e.jsx("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Cost Per Unit"}),e.jsx("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Shopee Price"}),e.jsx("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"SRP"}),e.jsx("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Reseller"}),e.jsx("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"City Distributor"}),e.jsx("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"District Distributor"}),e.jsx("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Provincial Distributor"}),e.jsx("th",{scope:"col",className:"relative py-3.5 pl-3 pr-4 sm:pr-6",children:e.jsx("span",{className:"sr-only",children:"Edit"})})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:(u=(j=l==null?void 0:l.data)==null?void 0:j.data)==null?void 0:u.map((s,i)=>{var v;return s==null||s.quantity,s.quantity==0||s.quantity>=1&&s.quantity<=10,e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"whitespace-nowrap py-4 pl-4 pr-3 text-sm sm:pl-6",children:e.jsx("input",{type:"checkbox",checked:d.some(p=>p.id===s.id),onChange:p=>{const A=p.target.checked?[...d,s]:d.filter(I=>I.id!==s.id);m(h(A))}})}),e.jsx("td",{className:"whitespace-nowrap py-4 pl-3 pr-3 text-center text-sm font-bold text-gray-700 bg-slate-100",children:s.id}),e.jsx("td",{className:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-bold text-pink-500 sm:pl-6",children:s.name}),e.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:e.jsx("span",{className:"inline-flex items-center rounded-full bg-yellow-50 px-2 py-1 text-xs font-medium text-yellow-800 ring-1 ring-yellow-600/20 ring-inset",children:s==null?void 0:s.brand})}),e.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:e.jsx("span",{className:"inline-flex items-center rounded-full bg-yellow-50 px-2 py-1 text-xs font-medium text-yellow-800 ring-1 ring-yellow-600/20 ring-inset",children:s==null?void 0:s.delivery_receipt_no})}),e.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:e.jsx("span",{className:"inline-flex items-center rounded-full bg-pink-50 px-2 py-1 text-xs font-medium text-pink-800 ring-1 ring-pink-600/20 ring-inset",children:(v=s==null?void 0:s.categories)==null?void 0:v.name})}),e.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-700 font-bold",children:s.cost==null||Number(s.cost)===0?"₱None":`₱${Number(s.cost).toFixed(2)}`}),e.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-700 font-bold",children:s.shopee==null||Number(s.shopee)===0?"₱None":`₱${Number(s.shopee).toFixed(2)}`}),e.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-700 font-bold",children:s.srp==null||Number(s.srp)===0?"₱None":`₱${Number(s.srp).toFixed(2)}`}),e.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-700 font-bold",children:s.reseller==null||Number(s.reseller)===0?"₱None":`₱${Number(s.reseller).toFixed(2)}`}),e.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-700 font-bold",children:s.city_distributor==null||Number(s.city_distributor)===0?"₱None":`₱${Number(s.city_distributor).toFixed(2)}`}),e.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-700 font-bold",children:s.district_distributor==null||Number(s.district_distributor)===0?"₱None":`₱${Number(s.district_distributor).toFixed(2)}`}),e.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-700 font-bold",children:s.provincial_distributor==null||Number(s.provincial_distributor)===0?"₱None":`₱${Number(s.provincial_distributor).toFixed(2)}`}),e.jsx("td",{className:"relative py-4 pl-3 pr-4 text-sm font-medium sm:pr-6",children:e.jsx(K,{data:s})})]},s.id||s.name)})})]})})})})}),e.jsx(X,{})]}),k&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:()=>r(!1)}),e.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[e.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:e.jsx("div",{className:"sm:flex sm:items-start",children:e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Search by Product Code/ID"}),e.jsx("button",{onClick:()=>r(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(q,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",placeholder:"Enter product code or ID...",value:a,onChange:s=>o(s.target.value),onKeyPress:s=>s.key==="Enter"&&N(),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-pink-500 focus:border-pink-500",autoFocus:!0}),e.jsx("button",{onClick:N,disabled:n||!a.trim(),className:"px-4 py-2 bg-pink-500 text-white rounded-md hover:bg-pink-600 disabled:bg-gray-300 disabled:cursor-not-allowed",children:n?"Searching...":"Search"})]})}),e.jsxs("div",{className:"max-h-64 overflow-y-auto",children:[n&&e.jsxs("div",{className:"flex justify-center items-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-pink-500"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Searching..."})]}),!n&&x.length===0&&a&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:['No products found with code "',a,'"']}),!n&&x.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Results:"}),x.map(s=>{var i;return e.jsx("div",{onClick:()=>_(s),className:"p-3 border rounded-md hover:bg-gray-50 cursor-pointer",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-gray-900",children:["ID: ",s.id]}),e.jsx("div",{className:"text-sm text-pink-600 font-medium",children:s.name}),e.jsxs("div",{className:"text-xs text-gray-500",children:[(i=s.categories)==null?void 0:i.name," • ",s.brand]})]}),e.jsx("div",{className:"text-right text-sm",children:e.jsxs("div",{className:"font-medium text-gray-900",children:["₱",Number(s.srp||0).toFixed(2)]})})]})},s.id)})]})]})]})})}),e.jsx("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:e.jsx("button",{onClick:R,className:"w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-pink-500 sm:ml-3 sm:w-auto sm:text-sm",children:"Clear & Close"})})]})]})})]})}export{Qe as default};
