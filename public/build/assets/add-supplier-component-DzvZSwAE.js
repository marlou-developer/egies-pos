import{r as x,u as g,a as v,j as e,K as d,s as f,d as b}from"./app-Dzu9xr7z.js";import{B as y,C as N}from"./index-BMqvgONh.js";import{D as w}from"./drawer-section-BrFjEgNd.js";import{I as i}from"./input-DFW4CQhA.js";import{c as _,g as k}from"./supplier-thunk-CEFOrROd.js";import{F as C}from"./XMarkIcon-_-eSTqz_.js";import{s as h}from"./index-D7yuUoDE.js";import"./transition-lT8b_WL3.js";import"./useZIndex-Kyum7T40.js";import"./index-gcRTEXGa.js";import"./index-L0cgopd6.js";import"./UnstableContext-CPeCZf_9.js";import"./useCSSVarCls-DgfIz8SZ.js";import"./asyncToGenerator-G3JtzgWP.js";import"./KeyCode-C40MO73N.js";function H({open:u,setOpenSupplier:l}){const[c,m]=x.useState(!1),[r,S]=x.useState(null),{supplier:s}=g(t=>t.suppliers),o=v();function n(t,a){o(typeof t=="string"?d({...s,[t]:a}):d({...s,[t.target.name]:t.target.value}))}async function j(t){t.preventDefault(),m(!0);const a=new FormData;a.append("file_name",s.file_name??""),a.append("name",s.name??""),a.append("address",s.address??""),a.append("contact_person",s.contact_person??""),a.append("contact_no",s.contact_no??""),a.append("email",s.email??""),r&&r.length>0&&Array.from(r).forEach(p=>{a.append("uploads[]",p)});try{await f.dispatch(_(a)),await f.dispatch(k()),h.success("Supplier successfully saved!"),l(!1),o(d({})),o(b({}))}catch{h.error("Failed to add Supplier. Please try again.")}finally{m(!1)}}return e.jsx(e.Fragment,{children:e.jsx(w,{open:u,setOpen:l,children:e.jsxs("form",{onSubmit:j,className:"flex h-full flex-col divide-y divide-gray-200 bg-white shadow-xl",children:[e.jsxs("div",{className:"h-0 flex-1 overflow-y-auto",children:[e.jsxs("div",{className:"bg-pink-200 px-4 py-6 sm:px-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-base font-semibold text-pink-600",children:[e.jsx(y,{className:"float-left mr-1 mt-1"}),"New Supplier"]}),e.jsx("div",{className:"ml-3 flex h-7 items-center",children:e.jsxs("button",{type:"button",onClick:()=>l(!1),className:"relative rounded-md bg-pink-200 text-gray-400 hover:text-gray-600 focus:ring-2 focus:ring-white focus:outline-hidden",children:[e.jsx("span",{className:"absolute -inset-2.5"}),e.jsx("span",{className:"sr-only",children:"Close panel"}),e.jsx(C,{"aria-hidden":"true",className:"size-6"})]})})]}),e.jsx("div",{className:"mt-1",children:e.jsx("p",{className:"text-sm text-gray-600",children:"Get started by filling in the information below to create your new Supplier."})})]}),e.jsx("div",{className:"flex flex-1 flex-col justify-between",children:e.jsx("div",{className:"divide-y divide-gray-200 px-4 sm:px-6",children:e.jsxs("div",{className:"space-y-6 pt-6 pb-5",children:[e.jsxs("div",{className:"sm:col-span-12",children:[e.jsx(N,{className:"float-left size-5 mr-1 mt-3 text-pink-500"}),e.jsx("h3",{className:"text-base font-medium text-gray-600 pt-3",children:"Supplier Information"}),e.jsx("hr",{})]}),e.jsx("div",{children:e.jsx(i,{onChange:n,value:(s==null?void 0:s.name)??"",name:"name",label:"Supplier Name",type:"text"})}),e.jsx("div",{children:e.jsx(i,{onChange:n,value:(s==null?void 0:s.address)??"",name:"address",label:"Address",type:"text"})}),e.jsx("div",{children:e.jsx(i,{onChange:n,value:(s==null?void 0:s.contact_person)??"",name:"contact_person",label:"Contact Person",type:"text"})}),e.jsx("div",{children:e.jsx(i,{onChange:n,value:(s==null?void 0:s.contact_no)??"",name:"contact_no",label:"Contact No.",type:"number"})}),e.jsx("div",{children:e.jsx(i,{onChange:n,value:(s==null?void 0:s.email)??"",name:"email",label:"Email Address",type:"email"})})]})})})]}),e.jsxs("div",{className:"flex shrink-0 justify-end px-4 py-4",children:[e.jsx("button",{type:"button",onClick:()=>l(!1),className:"rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-xs ring-1 ring-gray-300 ring-inset hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:c,className:"ml-4 inline-flex justify-center rounded-md bg-pink-500 px-3 py-2 text-sm font-semibold text-white shadow-xs hover:bg-pink-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-pink-600",children:c?"Saving...":"Save"})]})]})})})}export{H as default};
