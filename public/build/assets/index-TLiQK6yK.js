import{R as ei,r as d}from"./app--uWW7CQz.js";import{c as vr}from"./index-pFECcfZV.js";import{O as ri,P as cn,Q as fn,m as Vr,l as Rr,T as An,U as _n,u as Dn,b as R,W as Ht,_ as ue,e as zr,g as Xe,X as ti,Y as Ln,Z as ni,i as A,d as p,$ as W,a0 as Lr,a1 as fr,a2 as Qe,a3 as gn,f as pt,a as K,a4 as qn,j as _e,c as ii,a5 as ai,n as cr,a6 as Kt,a7 as Jt}from"./useZIndex-DYDdCYKr.js";import{_ as jr,b as De}from"./UnstableContext-hThobG2-.js";import{a as oi,P as Wn}from"./useId-CnBhpbXt.js";function ht(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=[];return ei.Children.forEach(i,function(n){n==null&&!r.keepEmpty||(Array.isArray(n)?e=e.concat(ht(n)):ri(n)&&n.props?e=e.concat(ht(n.props.children,r)):e.push(n))}),e}var Zt=d.createContext(null);function si(i){var r=i.children,e=i.onBatchResize,n=d.useRef(0),t=d.useRef([]),a=d.useContext(Zt),o=d.useCallback(function(s,u,c){n.current+=1;var l=n.current;t.current.push({size:s,element:u,data:c}),Promise.resolve().then(function(){l===n.current&&(e==null||e(t.current),t.current=[])}),a==null||a(s,u,c)},[e,a]);return d.createElement(Zt.Provider,{value:o},r)}var In=function(){if(typeof Map<"u")return Map;function i(r,e){var n=-1;return r.some(function(t,a){return t[0]===e?(n=a,!0):!1}),n}return function(){function r(){this.__entries__=[]}return Object.defineProperty(r.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),r.prototype.get=function(e){var n=i(this.__entries__,e),t=this.__entries__[n];return t&&t[1]},r.prototype.set=function(e,n){var t=i(this.__entries__,e);~t?this.__entries__[t][1]=n:this.__entries__.push([e,n])},r.prototype.delete=function(e){var n=this.__entries__,t=i(n,e);~t&&n.splice(t,1)},r.prototype.has=function(e){return!!~i(this.__entries__,e)},r.prototype.clear=function(){this.__entries__.splice(0)},r.prototype.forEach=function(e,n){n===void 0&&(n=null);for(var t=0,a=this.__entries__;t<a.length;t++){var o=a[t];e.call(n,o[1],o[0])}},r}()}(),Qt=typeof window<"u"&&typeof document<"u"&&window.document===document,gt=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),ui=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(gt):function(i){return setTimeout(function(){return i(Date.now())},1e3/60)}}(),li=2;function ci(i,r){var e=!1,n=!1,t=0;function a(){e&&(e=!1,i()),n&&s()}function o(){ui(a)}function s(){var u=Date.now();if(e){if(u-t<li)return;n=!0}else e=!0,n=!1,setTimeout(o,r);t=u}return s}var fi=20,di=["top","right","bottom","left","width","height","size","weight"],vi=typeof MutationObserver<"u",hi=function(){function i(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=ci(this.refresh.bind(this),fi)}return i.prototype.addObserver=function(r){~this.observers_.indexOf(r)||this.observers_.push(r),this.connected_||this.connect_()},i.prototype.removeObserver=function(r){var e=this.observers_,n=e.indexOf(r);~n&&e.splice(n,1),!e.length&&this.connected_&&this.disconnect_()},i.prototype.refresh=function(){var r=this.updateObservers_();r&&this.refresh()},i.prototype.updateObservers_=function(){var r=this.observers_.filter(function(e){return e.gatherActive(),e.hasActive()});return r.forEach(function(e){return e.broadcastActive()}),r.length>0},i.prototype.connect_=function(){!Qt||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),vi?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},i.prototype.disconnect_=function(){!Qt||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},i.prototype.onTransitionEnd_=function(r){var e=r.propertyName,n=e===void 0?"":e,t=di.some(function(a){return!!~n.indexOf(a)});t&&this.refresh()},i.getInstance=function(){return this.instance_||(this.instance_=new i),this.instance_},i.instance_=null,i}(),zn=function(i,r){for(var e=0,n=Object.keys(r);e<n.length;e++){var t=n[e];Object.defineProperty(i,t,{value:r[t],enumerable:!1,writable:!1,configurable:!0})}return i},Er=function(i){var r=i&&i.ownerDocument&&i.ownerDocument.defaultView;return r||gt},jn=bt(0,0,0,0);function mt(i){return parseFloat(i)||0}function mn(i){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];return r.reduce(function(n,t){var a=i["border-"+t+"-width"];return n+mt(a)},0)}function gi(i){for(var r=["top","right","bottom","left"],e={},n=0,t=r;n<t.length;n++){var a=t[n],o=i["padding-"+a];e[a]=mt(o)}return e}function mi(i){var r=i.getBBox();return bt(0,0,r.width,r.height)}function yi(i){var r=i.clientWidth,e=i.clientHeight;if(!r&&!e)return jn;var n=Er(i).getComputedStyle(i),t=gi(n),a=t.left+t.right,o=t.top+t.bottom,s=mt(n.width),u=mt(n.height);if(n.boxSizing==="border-box"&&(Math.round(s+a)!==r&&(s-=mn(n,"left","right")+a),Math.round(u+o)!==e&&(u-=mn(n,"top","bottom")+o)),!bi(i)){var c=Math.round(s+a)-r,l=Math.round(u+o)-e;Math.abs(c)!==1&&(s-=c),Math.abs(l)!==1&&(u-=l)}return bt(t.left,t.top,s,u)}var pi=function(){return typeof SVGGraphicsElement<"u"?function(i){return i instanceof Er(i).SVGGraphicsElement}:function(i){return i instanceof Er(i).SVGElement&&typeof i.getBBox=="function"}}();function bi(i){return i===Er(i).document.documentElement}function Fi(i){return Qt?pi(i)?mi(i):yi(i):jn}function wi(i){var r=i.x,e=i.y,n=i.width,t=i.height,a=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,o=Object.create(a.prototype);return zn(o,{x:r,y:e,width:n,height:t,top:e,right:r+n,bottom:t+e,left:r}),o}function bt(i,r,e,n){return{x:i,y:r,width:e,height:n}}var Ci=function(){function i(r){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=bt(0,0,0,0),this.target=r}return i.prototype.isActive=function(){var r=Fi(this.target);return this.contentRect_=r,r.width!==this.broadcastWidth||r.height!==this.broadcastHeight},i.prototype.broadcastRect=function(){var r=this.contentRect_;return this.broadcastWidth=r.width,this.broadcastHeight=r.height,r},i}(),Pi=function(){function i(r,e){var n=wi(e);zn(this,{target:r,contentRect:n})}return i}(),Ei=function(){function i(r,e,n){if(this.activeObservations_=[],this.observations_=new In,typeof r!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=r,this.controller_=e,this.callbackCtx_=n}return i.prototype.observe=function(r){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(r instanceof Er(r).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(r)||(e.set(r,new Ci(r)),this.controller_.addObserver(this),this.controller_.refresh())}},i.prototype.unobserve=function(r){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(r instanceof Er(r).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(r)&&(e.delete(r),e.size||this.controller_.removeObserver(this))}},i.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},i.prototype.gatherActive=function(){var r=this;this.clearActive(),this.observations_.forEach(function(e){e.isActive()&&r.activeObservations_.push(e)})},i.prototype.broadcastActive=function(){if(this.hasActive()){var r=this.callbackCtx_,e=this.activeObservations_.map(function(n){return new Pi(n.target,n.broadcastRect())});this.callback_.call(r,e,r),this.clearActive()}},i.prototype.clearActive=function(){this.activeObservations_.splice(0)},i.prototype.hasActive=function(){return this.activeObservations_.length>0},i}(),Hn=typeof WeakMap<"u"?new WeakMap:new In,Un=function(){function i(r){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var e=hi.getInstance(),n=new Ei(r,e,this);Hn.set(this,n)}return i}();["observe","unobserve","disconnect"].forEach(function(i){Un.prototype[i]=function(){var r;return(r=Hn.get(this))[i].apply(r,arguments)}});var Mi=function(){return typeof gt.ResizeObserver<"u"?gt.ResizeObserver:Un}(),Ye=new Map;function Vi(i){i.forEach(function(r){var e,n=r.target;(e=Ye.get(n))===null||e===void 0||e.forEach(function(t){return t(n)})})}var Bn=new Mi(Vi);function Ri(i,r){Ye.has(i)||(Ye.set(i,new Set),Bn.observe(i)),Ye.get(i).add(r)}function ki(i,r){Ye.has(i)&&(Ye.get(i).delete(r),Ye.get(i).size||(Bn.unobserve(i),Ye.delete(i)))}var xi=function(i){cn(e,i);var r=fn(e);function e(){return Vr(this,e),r.apply(this,arguments)}return Rr(e,[{key:"render",value:function(){return this.props.children}}]),e}(d.Component);function Si(i,r){var e=i.children,n=i.disabled,t=d.useRef(null),a=d.useRef(null),o=d.useContext(Zt),s=typeof e=="function",u=s?e(t):e,c=d.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),l=!s&&d.isValidElement(u)&&An(u),v=l?_n(u):null,h=Dn(v,t),F=function(){var b;return Ht(t.current)||(t.current&&ue(t.current)==="object"?Ht((b=t.current)===null||b===void 0?void 0:b.nativeElement):null)||Ht(a.current)};d.useImperativeHandle(r,function(){return F()});var m=d.useRef(i);m.current=i;var y=d.useCallback(function(f){var b=m.current,g=b.onResize,w=b.data,V=f.getBoundingClientRect(),P=V.width,C=V.height,x=f.offsetWidth,S=f.offsetHeight,E=Math.floor(P),k=Math.floor(C);if(c.current.width!==E||c.current.height!==k||c.current.offsetWidth!==x||c.current.offsetHeight!==S){var $={width:E,height:k,offsetWidth:x,offsetHeight:S};c.current=$;var L=x===Math.round(P)?P:x,O=S===Math.round(C)?C:S,T=R(R({},$),{},{offsetWidth:L,offsetHeight:O});o==null||o(T,f,w),g&&Promise.resolve().then(function(){g(T,f)})}},[]);return d.useEffect(function(){var f=F();return f&&!n&&Ri(f,y),function(){return ki(f,y)}},[t.current,n]),d.createElement(xi,{ref:a},l?d.cloneElement(u,{ref:h}):u)}var Ni=d.forwardRef(Si),$i="rc-observer-key";function Ti(i,r){var e=i.children,n=typeof e=="function"?[e]:ht(e);return n.map(function(t,a){var o=(t==null?void 0:t.key)||"".concat($i,"-").concat(a);return d.createElement(Ni,zr({},i,{key:o,ref:a===0?r:void 0}),t)})}var dn=d.forwardRef(Ti);dn.Collection=si;const Oi=function(i){if(!i)return!1;if(i instanceof Element){if(i.offsetParent)return!0;if(i.getBBox){var r=i.getBBox(),e=r.width,n=r.height;if(e||n)return!0}if(i.getBoundingClientRect){var t=i.getBoundingClientRect(),a=t.width,o=t.height;if(a||o)return!0}}return!1},Gn=d.createContext(null),Ka=(i,r)=>{const e=d.useContext(Gn),n=d.useMemo(()=>{if(!e)return"";const{compactDirection:t,isFirstItem:a,isLastItem:o}=e,s=t==="vertical"?"-vertical-":"-";return vr(`${i}-compact${s}item`,{[`${i}-compact${s}first-item`]:a,[`${i}-compact${s}last-item`]:o,[`${i}-compact${s}item-rtl`]:r==="rtl"})},[i,r,e]);return{compactSize:e==null?void 0:e.compactSize,compactDirection:e==null?void 0:e.compactDirection,compactItemClassnames:n}},Ja=i=>{const{children:r}=i;return d.createElement(Gn.Provider,{value:null},r)};var dr="RC_FORM_INTERNAL_HOOKS",z=function(){Xe(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")},Mr=d.createContext({getFieldValue:z,getFieldsValue:z,getFieldError:z,getFieldWarning:z,getFieldsError:z,isFieldsTouched:z,isFieldTouched:z,isFieldValidating:z,isFieldsValidating:z,resetFields:z,setFields:z,setFieldValue:z,setFieldsValue:z,validateFields:z,submit:z,getInternalHooks:function(){return z(),{dispatch:z,initEntityValue:z,registerField:z,useSubscribe:z,setInitialValues:z,destroyForm:z,setCallbacks:z,registerWatch:z,getFields:z,setValidateMessages:z,setPreserve:z,getInitialValue:z}}}),yt=d.createContext(null);function Yt(i){return i==null?[]:Array.isArray(i)?i:[i]}function Ai(i){return i&&!!i._init}function Xt(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var r=JSON.parse(JSON.stringify(this));return r.clone=this.clone,r}}}var en=Xt();function _i(i){try{return Function.toString.call(i).indexOf("[native code]")!==-1}catch{return typeof i=="function"}}function Di(i,r,e){if(ti())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,r);var t=new(i.bind.apply(i,n));return e&&Ln(t,e.prototype),t}function rn(i){var r=typeof Map=="function"?new Map:void 0;return rn=function(n){if(n===null||!_i(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(r!==void 0){if(r.has(n))return r.get(n);r.set(n,t)}function t(){return Di(n,arguments,ni(this).constructor)}return t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Ln(t,n)},rn(i)}var Li=/%[sdj%]/g,qi=function(){};function tn(i){if(!i||!i.length)return null;var r={};return i.forEach(function(e){var n=e.field;r[n]=r[n]||[],r[n].push(e)}),r}function he(i){for(var r=arguments.length,e=new Array(r>1?r-1:0),n=1;n<r;n++)e[n-1]=arguments[n];var t=0,a=e.length;if(typeof i=="function")return i.apply(null,e);if(typeof i=="string"){var o=i.replace(Li,function(s){if(s==="%%")return"%";if(t>=a)return s;switch(s){case"%s":return String(e[t++]);case"%d":return Number(e[t++]);case"%j":try{return JSON.stringify(e[t++])}catch{return"[Circular]"}break;default:return s}});return o}return i}function Wi(i){return i==="string"||i==="url"||i==="hex"||i==="email"||i==="date"||i==="pattern"}function te(i,r){return!!(i==null||r==="array"&&Array.isArray(i)&&!i.length||Wi(r)&&typeof i=="string"&&!i)}function Ii(i,r,e){var n=[],t=0,a=i.length;function o(s){n.push.apply(n,A(s||[])),t++,t===a&&e(n)}i.forEach(function(s){r(s,o)})}function yn(i,r,e){var n=0,t=i.length;function a(o){if(o&&o.length){e(o);return}var s=n;n=n+1,s<t?r(i[s],a):e([])}a([])}function zi(i){var r=[];return Object.keys(i).forEach(function(e){r.push.apply(r,A(i[e]||[]))}),r}var pn=function(i){cn(e,i);var r=fn(e);function e(n,t){var a;return Vr(this,e),a=r.call(this,"Async Validation Error"),p(W(a),"errors",void 0),p(W(a),"fields",void 0),a.errors=n,a.fields=t,a}return Rr(e)}(rn(Error));function ji(i,r,e,n,t){if(r.first){var a=new Promise(function(h,F){var m=function(b){return n(b),b.length?F(new pn(b,tn(b))):h(t)},y=zi(i);yn(y,e,m)});return a.catch(function(h){return h}),a}var o=r.firstFields===!0?Object.keys(i):r.firstFields||[],s=Object.keys(i),u=s.length,c=0,l=[],v=new Promise(function(h,F){var m=function(f){if(l.push.apply(l,f),c++,c===u)return n(l),l.length?F(new pn(l,tn(l))):h(t)};s.length||(n(l),h(t)),s.forEach(function(y){var f=i[y];o.indexOf(y)!==-1?yn(f,e,m):Ii(f,e,m)})});return v.catch(function(h){return h}),v}function Hi(i){return!!(i&&i.message!==void 0)}function Ui(i,r){for(var e=i,n=0;n<r.length;n++){if(e==null)return e;e=e[r[n]]}return e}function bn(i,r){return function(e){var n;return i.fullFields?n=Ui(r,i.fullFields):n=r[e.field||i.fullField],Hi(e)?(e.field=e.field||i.fullField,e.fieldValue=n,e):{message:typeof e=="function"?e():e,fieldValue:n,field:e.field||i.fullField}}}function Fn(i,r){if(r){for(var e in r)if(r.hasOwnProperty(e)){var n=r[e];ue(n)==="object"&&ue(i[e])==="object"?i[e]=R(R({},i[e]),n):i[e]=n}}return i}var Fr="enum",Bi=function(r,e,n,t,a){r[Fr]=Array.isArray(r[Fr])?r[Fr]:[],r[Fr].indexOf(e)===-1&&t.push(he(a.messages[Fr],r.fullField,r[Fr].join(", ")))},Gi=function(r,e,n,t,a){if(r.pattern){if(r.pattern instanceof RegExp)r.pattern.lastIndex=0,r.pattern.test(e)||t.push(he(a.messages.pattern.mismatch,r.fullField,e,r.pattern));else if(typeof r.pattern=="string"){var o=new RegExp(r.pattern);o.test(e)||t.push(he(a.messages.pattern.mismatch,r.fullField,e,r.pattern))}}},Ki=function(r,e,n,t,a){var o=typeof r.len=="number",s=typeof r.min=="number",u=typeof r.max=="number",c=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,l=e,v=null,h=typeof e=="number",F=typeof e=="string",m=Array.isArray(e);if(h?v="number":F?v="string":m&&(v="array"),!v)return!1;m&&(l=e.length),F&&(l=e.replace(c,"_").length),o?l!==r.len&&t.push(he(a.messages[v].len,r.fullField,r.len)):s&&!u&&l<r.min?t.push(he(a.messages[v].min,r.fullField,r.min)):u&&!s&&l>r.max?t.push(he(a.messages[v].max,r.fullField,r.max)):s&&u&&(l<r.min||l>r.max)&&t.push(he(a.messages[v].range,r.fullField,r.min,r.max))},Kn=function(r,e,n,t,a,o){r.required&&(!n.hasOwnProperty(r.field)||te(e,o||r.type))&&t.push(he(a.messages.required,r.fullField))},vt;const Ji=function(){if(vt)return vt;var i="[a-fA-F\\d:]",r=function(C){return C&&C.includeBoundaries?"(?:(?<=\\s|^)(?=".concat(i,")|(?<=").concat(i,")(?=\\s|$))"):""},e="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",n="[a-fA-F\\d]{1,4}",t=["(?:".concat(n,":){7}(?:").concat(n,"|:)"),"(?:".concat(n,":){6}(?:").concat(e,"|:").concat(n,"|:)"),"(?:".concat(n,":){5}(?::").concat(e,"|(?::").concat(n,"){1,2}|:)"),"(?:".concat(n,":){4}(?:(?::").concat(n,"){0,1}:").concat(e,"|(?::").concat(n,"){1,3}|:)"),"(?:".concat(n,":){3}(?:(?::").concat(n,"){0,2}:").concat(e,"|(?::").concat(n,"){1,4}|:)"),"(?:".concat(n,":){2}(?:(?::").concat(n,"){0,3}:").concat(e,"|(?::").concat(n,"){1,5}|:)"),"(?:".concat(n,":){1}(?:(?::").concat(n,"){0,4}:").concat(e,"|(?::").concat(n,"){1,6}|:)"),"(?::(?:(?::".concat(n,"){0,5}:").concat(e,"|(?::").concat(n,"){1,7}|:))")],a="(?:%[0-9a-zA-Z]{1,})?",o="(?:".concat(t.join("|"),")").concat(a),s=new RegExp("(?:^".concat(e,"$)|(?:^").concat(o,"$)")),u=new RegExp("^".concat(e,"$")),c=new RegExp("^".concat(o,"$")),l=function(C){return C&&C.exact?s:new RegExp("(?:".concat(r(C)).concat(e).concat(r(C),")|(?:").concat(r(C)).concat(o).concat(r(C),")"),"g")};l.v4=function(P){return P&&P.exact?u:new RegExp("".concat(r(P)).concat(e).concat(r(P)),"g")},l.v6=function(P){return P&&P.exact?c:new RegExp("".concat(r(P)).concat(o).concat(r(P)),"g")};var v="(?:(?:[a-z]+:)?//)",h="(?:\\S+(?::\\S*)?@)?",F=l.v4().source,m=l.v6().source,y="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",f="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",b="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",g="(?::\\d{2,5})?",w='(?:[/?#][^\\s"]*)?',V="(?:".concat(v,"|www\\.)").concat(h,"(?:localhost|").concat(F,"|").concat(m,"|").concat(y).concat(f).concat(b,")").concat(g).concat(w);return vt=new RegExp("(?:^".concat(V,"$)"),"i"),vt};var wn={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},qr={integer:function(r){return qr.number(r)&&parseInt(r,10)===r},float:function(r){return qr.number(r)&&!qr.integer(r)},array:function(r){return Array.isArray(r)},regexp:function(r){if(r instanceof RegExp)return!0;try{return!!new RegExp(r)}catch{return!1}},date:function(r){return typeof r.getTime=="function"&&typeof r.getMonth=="function"&&typeof r.getYear=="function"&&!isNaN(r.getTime())},number:function(r){return isNaN(r)?!1:typeof r=="number"},object:function(r){return ue(r)==="object"&&!qr.array(r)},method:function(r){return typeof r=="function"},email:function(r){return typeof r=="string"&&r.length<=320&&!!r.match(wn.email)},url:function(r){return typeof r=="string"&&r.length<=2048&&!!r.match(Ji())},hex:function(r){return typeof r=="string"&&!!r.match(wn.hex)}},Zi=function(r,e,n,t,a){if(r.required&&e===void 0){Kn(r,e,n,t,a);return}var o=["integer","float","array","regexp","object","method","email","number","date","url","hex"],s=r.type;o.indexOf(s)>-1?qr[s](e)||t.push(he(a.messages.types[s],r.fullField,r.type)):s&&ue(e)!==r.type&&t.push(he(a.messages.types[s],r.fullField,r.type))},Qi=function(r,e,n,t,a){(/^\s+$/.test(e)||e==="")&&t.push(he(a.messages.whitespace,r.fullField))};const D={required:Kn,whitespace:Qi,type:Zi,range:Ki,enum:Bi,pattern:Gi};var Yi=function(r,e,n,t,a){var o=[],s=r.required||!r.required&&t.hasOwnProperty(r.field);if(s){if(te(e)&&!r.required)return n();D.required(r,e,t,o,a)}n(o)},Xi=function(r,e,n,t,a){var o=[],s=r.required||!r.required&&t.hasOwnProperty(r.field);if(s){if(e==null&&!r.required)return n();D.required(r,e,t,o,a,"array"),e!=null&&(D.type(r,e,t,o,a),D.range(r,e,t,o,a))}n(o)},ea=function(r,e,n,t,a){var o=[],s=r.required||!r.required&&t.hasOwnProperty(r.field);if(s){if(te(e)&&!r.required)return n();D.required(r,e,t,o,a),e!==void 0&&D.type(r,e,t,o,a)}n(o)},ra=function(r,e,n,t,a){var o=[],s=r.required||!r.required&&t.hasOwnProperty(r.field);if(s){if(te(e,"date")&&!r.required)return n();if(D.required(r,e,t,o,a),!te(e,"date")){var u;e instanceof Date?u=e:u=new Date(e),D.type(r,u,t,o,a),u&&D.range(r,u.getTime(),t,o,a)}}n(o)},ta="enum",na=function(r,e,n,t,a){var o=[],s=r.required||!r.required&&t.hasOwnProperty(r.field);if(s){if(te(e)&&!r.required)return n();D.required(r,e,t,o,a),e!==void 0&&D[ta](r,e,t,o,a)}n(o)},ia=function(r,e,n,t,a){var o=[],s=r.required||!r.required&&t.hasOwnProperty(r.field);if(s){if(te(e)&&!r.required)return n();D.required(r,e,t,o,a),e!==void 0&&(D.type(r,e,t,o,a),D.range(r,e,t,o,a))}n(o)},aa=function(r,e,n,t,a){var o=[],s=r.required||!r.required&&t.hasOwnProperty(r.field);if(s){if(te(e)&&!r.required)return n();D.required(r,e,t,o,a),e!==void 0&&(D.type(r,e,t,o,a),D.range(r,e,t,o,a))}n(o)},oa=function(r,e,n,t,a){var o=[],s=r.required||!r.required&&t.hasOwnProperty(r.field);if(s){if(te(e)&&!r.required)return n();D.required(r,e,t,o,a),e!==void 0&&D.type(r,e,t,o,a)}n(o)},sa=function(r,e,n,t,a){var o=[],s=r.required||!r.required&&t.hasOwnProperty(r.field);if(s){if(e===""&&(e=void 0),te(e)&&!r.required)return n();D.required(r,e,t,o,a),e!==void 0&&(D.type(r,e,t,o,a),D.range(r,e,t,o,a))}n(o)},ua=function(r,e,n,t,a){var o=[],s=r.required||!r.required&&t.hasOwnProperty(r.field);if(s){if(te(e)&&!r.required)return n();D.required(r,e,t,o,a),e!==void 0&&D.type(r,e,t,o,a)}n(o)},la=function(r,e,n,t,a){var o=[],s=r.required||!r.required&&t.hasOwnProperty(r.field);if(s){if(te(e,"string")&&!r.required)return n();D.required(r,e,t,o,a),te(e,"string")||D.pattern(r,e,t,o,a)}n(o)},ca=function(r,e,n,t,a){var o=[],s=r.required||!r.required&&t.hasOwnProperty(r.field);if(s){if(te(e)&&!r.required)return n();D.required(r,e,t,o,a),te(e)||D.type(r,e,t,o,a)}n(o)},fa=function(r,e,n,t,a){var o=[],s=Array.isArray(e)?"array":ue(e);D.required(r,e,t,o,a,s),n(o)},da=function(r,e,n,t,a){var o=[],s=r.required||!r.required&&t.hasOwnProperty(r.field);if(s){if(te(e,"string")&&!r.required)return n();D.required(r,e,t,o,a,"string"),te(e,"string")||(D.type(r,e,t,o,a),D.range(r,e,t,o,a),D.pattern(r,e,t,o,a),r.whitespace===!0&&D.whitespace(r,e,t,o,a))}n(o)},Ut=function(r,e,n,t,a){var o=r.type,s=[],u=r.required||!r.required&&t.hasOwnProperty(r.field);if(u){if(te(e,o)&&!r.required)return n();D.required(r,e,t,s,a,o),te(e,o)||D.type(r,e,t,s,a)}n(s)};const Wr={string:da,method:oa,number:sa,boolean:ea,regexp:ca,integer:aa,float:ia,array:Xi,object:ua,enum:na,pattern:la,date:ra,url:Ut,hex:Ut,email:Ut,required:fa,any:Yi};var Hr=function(){function i(r){Vr(this,i),p(this,"rules",null),p(this,"_messages",en),this.define(r)}return Rr(i,[{key:"define",value:function(e){var n=this;if(!e)throw new Error("Cannot configure a schema with no rules");if(ue(e)!=="object"||Array.isArray(e))throw new Error("Rules must be an object");this.rules={},Object.keys(e).forEach(function(t){var a=e[t];n.rules[t]=Array.isArray(a)?a:[a]})}},{key:"messages",value:function(e){return e&&(this._messages=Fn(Xt(),e)),this._messages}},{key:"validate",value:function(e){var n=this,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){},o=e,s=t,u=a;if(typeof s=="function"&&(u=s,s={}),!this.rules||Object.keys(this.rules).length===0)return u&&u(null,o),Promise.resolve(o);function c(m){var y=[],f={};function b(w){if(Array.isArray(w)){var V;y=(V=y).concat.apply(V,A(w))}else y.push(w)}for(var g=0;g<m.length;g++)b(m[g]);y.length?(f=tn(y),u(y,f)):u(null,o)}if(s.messages){var l=this.messages();l===en&&(l=Xt()),Fn(l,s.messages),s.messages=l}else s.messages=this.messages();var v={},h=s.keys||Object.keys(this.rules);h.forEach(function(m){var y=n.rules[m],f=o[m];y.forEach(function(b){var g=b;typeof g.transform=="function"&&(o===e&&(o=R({},o)),f=o[m]=g.transform(f),f!=null&&(g.type=g.type||(Array.isArray(f)?"array":ue(f)))),typeof g=="function"?g={validator:g}:g=R({},g),g.validator=n.getValidationMethod(g),g.validator&&(g.field=m,g.fullField=g.fullField||m,g.type=n.getType(g),v[m]=v[m]||[],v[m].push({rule:g,value:f,source:o,field:m}))})});var F={};return ji(v,s,function(m,y){var f=m.rule,b=(f.type==="object"||f.type==="array")&&(ue(f.fields)==="object"||ue(f.defaultField)==="object");b=b&&(f.required||!f.required&&m.value),f.field=m.field;function g(x,S){return R(R({},S),{},{fullField:"".concat(f.fullField,".").concat(x),fullFields:f.fullFields?[].concat(A(f.fullFields),[x]):[x]})}function w(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],S=Array.isArray(x)?x:[x];!s.suppressWarning&&S.length&&i.warning("async-validator:",S),S.length&&f.message!==void 0&&(S=[].concat(f.message));var E=S.map(bn(f,o));if(s.first&&E.length)return F[f.field]=1,y(E);if(!b)y(E);else{if(f.required&&!m.value)return f.message!==void 0?E=[].concat(f.message).map(bn(f,o)):s.error&&(E=[s.error(f,he(s.messages.required,f.field))]),y(E);var k={};f.defaultField&&Object.keys(m.value).map(function(O){k[O]=f.defaultField}),k=R(R({},k),m.rule.fields);var $={};Object.keys(k).forEach(function(O){var T=k[O],J=Array.isArray(T)?T:[T];$[O]=J.map(g.bind(null,O))});var L=new i($);L.messages(s.messages),m.rule.options&&(m.rule.options.messages=s.messages,m.rule.options.error=s.error),L.validate(m.value,m.rule.options||s,function(O){var T=[];E&&E.length&&T.push.apply(T,A(E)),O&&O.length&&T.push.apply(T,A(O)),y(T.length?T:null)})}}var V;if(f.asyncValidator)V=f.asyncValidator(f,m.value,w,m.source,s);else if(f.validator){try{V=f.validator(f,m.value,w,m.source,s)}catch(x){var P,C;(P=(C=console).error)===null||P===void 0||P.call(C,x),s.suppressValidatorError||setTimeout(function(){throw x},0),w(x.message)}V===!0?w():V===!1?w(typeof f.message=="function"?f.message(f.fullField||f.field):f.message||"".concat(f.fullField||f.field," fails")):V instanceof Array?w(V):V instanceof Error&&w(V.message)}V&&V.then&&V.then(function(){return w()},function(x){return w(x)})},function(m){c(m)},o)}},{key:"getType",value:function(e){if(e.type===void 0&&e.pattern instanceof RegExp&&(e.type="pattern"),typeof e.validator!="function"&&e.type&&!Wr.hasOwnProperty(e.type))throw new Error(he("Unknown rule type %s",e.type));return e.type||"string"}},{key:"getValidationMethod",value:function(e){if(typeof e.validator=="function")return e.validator;var n=Object.keys(e),t=n.indexOf("message");return t!==-1&&n.splice(t,1),n.length===1&&n[0]==="required"?Wr.required:Wr[this.getType(e)]||void 0}}]),i}();p(Hr,"register",function(r,e){if(typeof e!="function")throw new Error("Cannot register a validator by type, validator is not a function");Wr[r]=e});p(Hr,"warning",qi);p(Hr,"messages",en);p(Hr,"validators",Wr);var ve="'${name}' is not a valid ${type}",Jn={default:"Validation error on field '${name}'",required:"'${name}' is required",enum:"'${name}' must be one of [${enum}]",whitespace:"'${name}' cannot be empty",date:{format:"'${name}' is invalid for format date",parse:"'${name}' could not be parsed as date",invalid:"'${name}' is invalid date"},types:{string:ve,method:ve,array:ve,object:ve,number:ve,date:ve,boolean:ve,integer:ve,float:ve,regexp:ve,email:ve,url:ve,hex:ve},string:{len:"'${name}' must be exactly ${len} characters",min:"'${name}' must be at least ${min} characters",max:"'${name}' cannot be longer than ${max} characters",range:"'${name}' must be between ${min} and ${max} characters"},number:{len:"'${name}' must equal ${len}",min:"'${name}' cannot be less than ${min}",max:"'${name}' cannot be greater than ${max}",range:"'${name}' must be between ${min} and ${max}"},array:{len:"'${name}' must be exactly ${len} in length",min:"'${name}' cannot be less than ${min} in length",max:"'${name}' cannot be greater than ${max} in length",range:"'${name}' must be between ${min} and ${max} in length"},pattern:{mismatch:"'${name}' does not match pattern ${pattern}"}},Cn=Hr;function va(i,r){return i.replace(/\\?\$\{\w+\}/g,function(e){if(e.startsWith("\\"))return e.slice(1);var n=e.slice(2,-1);return r[n]})}var Pn="CODE_LOGIC_ERROR";function nn(i,r,e,n,t){return an.apply(this,arguments)}function an(){return an=jr(De().mark(function i(r,e,n,t,a){var o,s,u,c,l,v,h,F,m;return De().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return o=R({},n),delete o.ruleIndex,Cn.warning=function(){},o.validator&&(s=o.validator,o.validator=function(){try{return s.apply(void 0,arguments)}catch(b){return console.error(b),Promise.reject(Pn)}}),u=null,o&&o.type==="array"&&o.defaultField&&(u=o.defaultField,delete o.defaultField),c=new Cn(p({},r,[o])),l=Lr(Jn,t.validateMessages),c.messages(l),v=[],f.prev=10,f.next=13,Promise.resolve(c.validate(p({},r,e),R({},t)));case 13:f.next=18;break;case 15:f.prev=15,f.t0=f.catch(10),f.t0.errors&&(v=f.t0.errors.map(function(b,g){var w=b.message,V=w===Pn?l.default:w;return d.isValidElement(V)?d.cloneElement(V,{key:"error_".concat(g)}):V}));case 18:if(!(!v.length&&u)){f.next=23;break}return f.next=21,Promise.all(e.map(function(b,g){return nn("".concat(r,".").concat(g),b,u,t,a)}));case 21:return h=f.sent,f.abrupt("return",h.reduce(function(b,g){return[].concat(A(b),A(g))},[]));case 23:return F=R(R({},n),{},{name:r,enum:(n.enum||[]).join(", ")},a),m=v.map(function(b){return typeof b=="string"?va(b,F):b}),f.abrupt("return",m);case 26:case"end":return f.stop()}},i,null,[[10,15]])})),an.apply(this,arguments)}function ha(i,r,e,n,t,a){var o=i.join("."),s=e.map(function(l,v){var h=l.validator,F=R(R({},l),{},{ruleIndex:v});return h&&(F.validator=function(m,y,f){var b=!1,g=function(){for(var P=arguments.length,C=new Array(P),x=0;x<P;x++)C[x]=arguments[x];Promise.resolve().then(function(){Xe(!b,"Your validator function has already return a promise. `callback` will be ignored."),b||f.apply(void 0,C)})},w=h(m,y,g);b=w&&typeof w.then=="function"&&typeof w.catch=="function",Xe(b,"`callback` is deprecated. Please return a promise instead."),b&&w.then(function(){f()}).catch(function(V){f(V||" ")})}),F}).sort(function(l,v){var h=l.warningOnly,F=l.ruleIndex,m=v.warningOnly,y=v.ruleIndex;return!!h==!!m?F-y:h?1:-1}),u;if(t===!0)u=new Promise(function(){var l=jr(De().mark(function v(h,F){var m,y,f;return De().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:m=0;case 1:if(!(m<s.length)){g.next=12;break}return y=s[m],g.next=5,nn(o,r,y,n,a);case 5:if(f=g.sent,!f.length){g.next=9;break}return F([{errors:f,rule:y}]),g.abrupt("return");case 9:m+=1,g.next=1;break;case 12:h([]);case 13:case"end":return g.stop()}},v)}));return function(v,h){return l.apply(this,arguments)}}());else{var c=s.map(function(l){return nn(o,r,l,n,a).then(function(v){return{errors:v,rule:l}})});u=(t?ma(c):ga(c)).then(function(l){return Promise.reject(l)})}return u.catch(function(l){return l}),u}function ga(i){return on.apply(this,arguments)}function on(){return on=jr(De().mark(function i(r){return De().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Promise.all(r).then(function(t){var a,o=(a=[]).concat.apply(a,A(t));return o}));case 1:case"end":return n.stop()}},i)})),on.apply(this,arguments)}function ma(i){return sn.apply(this,arguments)}function sn(){return sn=jr(De().mark(function i(r){var e;return De().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=0,t.abrupt("return",new Promise(function(a){r.forEach(function(o){o.then(function(s){s.errors.length&&a([s]),e+=1,e===r.length&&a([])})})}));case 2:case"end":return t.stop()}},i)})),sn.apply(this,arguments)}function Y(i){return Yt(i)}function En(i,r){var e={};return r.forEach(function(n){var t=fr(i,n);e=Qe(e,n,t)}),e}function Pr(i,r){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return i&&i.some(function(n){return Zn(r,n,e)})}function Zn(i,r){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return!i||!r||!e&&i.length!==r.length?!1:r.every(function(n,t){return i[t]===n})}function ya(i,r){if(i===r)return!0;if(!i&&r||i&&!r||!i||!r||ue(i)!=="object"||ue(r)!=="object")return!1;var e=Object.keys(i),n=Object.keys(r),t=new Set([].concat(e,n));return A(t).every(function(a){var o=i[a],s=r[a];return typeof o=="function"&&typeof s=="function"?!0:o===s})}function pa(i){var r=arguments.length<=1?void 0:arguments[1];return r&&r.target&&ue(r.target)==="object"&&i in r.target?r.target[i]:r}function Mn(i,r,e){var n=i.length;if(r<0||r>=n||e<0||e>=n)return i;var t=i[r],a=r-e;return a>0?[].concat(A(i.slice(0,e)),[t],A(i.slice(e,r)),A(i.slice(r+1,n))):a<0?[].concat(A(i.slice(0,r)),A(i.slice(r+1,e+1)),[t],A(i.slice(e+1,n))):i}var ba=["name"],we=[];function Bt(i,r,e,n,t,a){return typeof i=="function"?i(r,e,"source"in a?{source:a.source}:{}):n!==t}var vn=function(i){cn(e,i);var r=fn(e);function e(n){var t;if(Vr(this,e),t=r.call(this,n),p(W(t),"state",{resetCount:0}),p(W(t),"cancelRegisterFunc",null),p(W(t),"mounted",!1),p(W(t),"touched",!1),p(W(t),"dirty",!1),p(W(t),"validatePromise",void 0),p(W(t),"prevValidating",void 0),p(W(t),"errors",we),p(W(t),"warnings",we),p(W(t),"cancelRegister",function(){var u=t.props,c=u.preserve,l=u.isListField,v=u.name;t.cancelRegisterFunc&&t.cancelRegisterFunc(l,c,Y(v)),t.cancelRegisterFunc=null}),p(W(t),"getNamePath",function(){var u=t.props,c=u.name,l=u.fieldContext,v=l.prefixName,h=v===void 0?[]:v;return c!==void 0?[].concat(A(h),A(c)):[]}),p(W(t),"getRules",function(){var u=t.props,c=u.rules,l=c===void 0?[]:c,v=u.fieldContext;return l.map(function(h){return typeof h=="function"?h(v):h})}),p(W(t),"refresh",function(){t.mounted&&t.setState(function(u){var c=u.resetCount;return{resetCount:c+1}})}),p(W(t),"metaCache",null),p(W(t),"triggerMetaEvent",function(u){var c=t.props.onMetaChange;if(c){var l=R(R({},t.getMeta()),{},{destroy:u});gn(t.metaCache,l)||c(l),t.metaCache=l}else t.metaCache=null}),p(W(t),"onStoreChange",function(u,c,l){var v=t.props,h=v.shouldUpdate,F=v.dependencies,m=F===void 0?[]:F,y=v.onReset,f=l.store,b=t.getNamePath(),g=t.getValue(u),w=t.getValue(f),V=c&&Pr(c,b);switch(l.type==="valueUpdate"&&l.source==="external"&&!gn(g,w)&&(t.touched=!0,t.dirty=!0,t.validatePromise=null,t.errors=we,t.warnings=we,t.triggerMetaEvent()),l.type){case"reset":if(!c||V){t.touched=!1,t.dirty=!1,t.validatePromise=void 0,t.errors=we,t.warnings=we,t.triggerMetaEvent(),y==null||y(),t.refresh();return}break;case"remove":{if(h&&Bt(h,u,f,g,w,l)){t.reRender();return}break}case"setField":{var P=l.data;if(V){"touched"in P&&(t.touched=P.touched),"validating"in P&&!("originRCField"in P)&&(t.validatePromise=P.validating?Promise.resolve([]):null),"errors"in P&&(t.errors=P.errors||we),"warnings"in P&&(t.warnings=P.warnings||we),t.dirty=!0,t.triggerMetaEvent(),t.reRender();return}else if("value"in P&&Pr(c,b,!0)){t.reRender();return}if(h&&!b.length&&Bt(h,u,f,g,w,l)){t.reRender();return}break}case"dependenciesUpdate":{var C=m.map(Y);if(C.some(function(x){return Pr(l.relatedFields,x)})){t.reRender();return}break}default:if(V||(!m.length||b.length||h)&&Bt(h,u,f,g,w,l)){t.reRender();return}break}h===!0&&t.reRender()}),p(W(t),"validateRules",function(u){var c=t.getNamePath(),l=t.getValue(),v=u||{},h=v.triggerName,F=v.validateOnly,m=F===void 0?!1:F,y=Promise.resolve().then(jr(De().mark(function f(){var b,g,w,V,P,C,x;return De().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(t.mounted){E.next=2;break}return E.abrupt("return",[]);case 2:if(b=t.props,g=b.validateFirst,w=g===void 0?!1:g,V=b.messageVariables,P=b.validateDebounce,C=t.getRules(),h&&(C=C.filter(function(k){return k}).filter(function(k){var $=k.validateTrigger;if(!$)return!0;var L=Yt($);return L.includes(h)})),!(P&&h)){E.next=10;break}return E.next=8,new Promise(function(k){setTimeout(k,P)});case 8:if(t.validatePromise===y){E.next=10;break}return E.abrupt("return",[]);case 10:return x=ha(c,l,C,u,w,V),x.catch(function(k){return k}).then(function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:we;if(t.validatePromise===y){var $;t.validatePromise=null;var L=[],O=[];($=k.forEach)===null||$===void 0||$.call(k,function(T){var J=T.rule.warningOnly,I=T.errors,Z=I===void 0?we:I;J?O.push.apply(O,A(Z)):L.push.apply(L,A(Z))}),t.errors=L,t.warnings=O,t.triggerMetaEvent(),t.reRender()}}),E.abrupt("return",x);case 13:case"end":return E.stop()}},f)})));return m||(t.validatePromise=y,t.dirty=!0,t.errors=we,t.warnings=we,t.triggerMetaEvent(),t.reRender()),y}),p(W(t),"isFieldValidating",function(){return!!t.validatePromise}),p(W(t),"isFieldTouched",function(){return t.touched}),p(W(t),"isFieldDirty",function(){if(t.dirty||t.props.initialValue!==void 0)return!0;var u=t.props.fieldContext,c=u.getInternalHooks(dr),l=c.getInitialValue;return l(t.getNamePath())!==void 0}),p(W(t),"getErrors",function(){return t.errors}),p(W(t),"getWarnings",function(){return t.warnings}),p(W(t),"isListField",function(){return t.props.isListField}),p(W(t),"isList",function(){return t.props.isList}),p(W(t),"isPreserve",function(){return t.props.preserve}),p(W(t),"getMeta",function(){t.prevValidating=t.isFieldValidating();var u={touched:t.isFieldTouched(),validating:t.prevValidating,errors:t.errors,warnings:t.warnings,name:t.getNamePath(),validated:t.validatePromise===null};return u}),p(W(t),"getOnlyChild",function(u){if(typeof u=="function"){var c=t.getMeta();return R(R({},t.getOnlyChild(u(t.getControlled(),c,t.props.fieldContext))),{},{isFunction:!0})}var l=ht(u);return l.length!==1||!d.isValidElement(l[0])?{child:l,isFunction:!1}:{child:l[0],isFunction:!1}}),p(W(t),"getValue",function(u){var c=t.props.fieldContext.getFieldsValue,l=t.getNamePath();return fr(u||c(!0),l)}),p(W(t),"getControlled",function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=t.props,l=c.name,v=c.trigger,h=c.validateTrigger,F=c.getValueFromEvent,m=c.normalize,y=c.valuePropName,f=c.getValueProps,b=c.fieldContext,g=h!==void 0?h:b.validateTrigger,w=t.getNamePath(),V=b.getInternalHooks,P=b.getFieldsValue,C=V(dr),x=C.dispatch,S=t.getValue(),E=f||function(T){return p({},y,T)},k=u[v],$=l!==void 0?E(S):{},L=R(R({},u),$);L[v]=function(){t.touched=!0,t.dirty=!0,t.triggerMetaEvent();for(var T,J=arguments.length,I=new Array(J),Z=0;Z<J;Z++)I[Z]=arguments[Z];F?T=F.apply(void 0,I):T=pa.apply(void 0,[y].concat(I)),m&&(T=m(T,S,P(!0))),T!==S&&x({type:"updateValue",namePath:w,value:T}),k&&k.apply(void 0,I)};var O=Yt(g||[]);return O.forEach(function(T){var J=L[T];L[T]=function(){J&&J.apply(void 0,arguments);var I=t.props.rules;I&&I.length&&x({type:"validateField",namePath:w,triggerName:T})}}),L}),n.fieldContext){var a=n.fieldContext.getInternalHooks,o=a(dr),s=o.initEntityValue;s(W(t))}return t}return Rr(e,[{key:"componentDidMount",value:function(){var t=this.props,a=t.shouldUpdate,o=t.fieldContext;if(this.mounted=!0,o){var s=o.getInternalHooks,u=s(dr),c=u.registerField;this.cancelRegisterFunc=c(this)}a===!0&&this.reRender()}},{key:"componentWillUnmount",value:function(){this.cancelRegister(),this.triggerMetaEvent(!0),this.mounted=!1}},{key:"reRender",value:function(){this.mounted&&this.forceUpdate()}},{key:"render",value:function(){var t=this.state.resetCount,a=this.props.children,o=this.getOnlyChild(a),s=o.child,u=o.isFunction,c;return u?c=s:d.isValidElement(s)?c=d.cloneElement(s,this.getControlled(s.props)):(Xe(!s,"`children` of Field is not validate ReactElement."),c=s),d.createElement(d.Fragment,{key:t},c)}}]),e}(d.Component);p(vn,"contextType",Mr);p(vn,"defaultProps",{trigger:"onChange",valuePropName:"value"});function Qn(i){var r,e=i.name,n=pt(i,ba),t=d.useContext(Mr),a=d.useContext(yt),o=e!==void 0?Y(e):void 0,s=(r=n.isListField)!==null&&r!==void 0?r:!!a,u="keep";return s||(u="_".concat((o||[]).join("_"))),d.createElement(vn,zr({key:u,name:o,isListField:s},n,{fieldContext:t}))}function Fa(i){var r=i.name,e=i.initialValue,n=i.children,t=i.rules,a=i.validateTrigger,o=i.isListField,s=d.useContext(Mr),u=d.useContext(yt),c=d.useRef({keys:[],id:0}),l=c.current,v=d.useMemo(function(){var y=Y(s.prefixName)||[];return[].concat(A(y),A(Y(r)))},[s.prefixName,r]),h=d.useMemo(function(){return R(R({},s),{},{prefixName:v})},[s,v]),F=d.useMemo(function(){return{getKey:function(f){var b=v.length,g=f[b];return[l.keys[g],f.slice(b+1)]}}},[v]);if(typeof n!="function")return Xe(!1,"Form.List only accepts function as children."),null;var m=function(f,b,g){var w=g.source;return w==="internal"?!1:f!==b};return d.createElement(yt.Provider,{value:F},d.createElement(Mr.Provider,{value:h},d.createElement(Qn,{name:[],shouldUpdate:m,rules:t,validateTrigger:a,initialValue:e,isList:!0,isListField:o??!!u},function(y,f){var b=y.value,g=b===void 0?[]:b,w=y.onChange,V=s.getFieldValue,P=function(){var E=V(v||[]);return E||[]},C={add:function(E,k){var $=P();k>=0&&k<=$.length?(l.keys=[].concat(A(l.keys.slice(0,k)),[l.id],A(l.keys.slice(k))),w([].concat(A($.slice(0,k)),[E],A($.slice(k))))):(l.keys=[].concat(A(l.keys),[l.id]),w([].concat(A($),[E]))),l.id+=1},remove:function(E){var k=P(),$=new Set(Array.isArray(E)?E:[E]);$.size<=0||(l.keys=l.keys.filter(function(L,O){return!$.has(O)}),w(k.filter(function(L,O){return!$.has(O)})))},move:function(E,k){if(E!==k){var $=P();E<0||E>=$.length||k<0||k>=$.length||(l.keys=Mn(l.keys,E,k),w(Mn($,E,k)))}}},x=g||[];return Array.isArray(x)||(x=[]),n(x.map(function(S,E){var k=l.keys[E];return k===void 0&&(l.keys[E]=l.id,k=l.keys[E],l.id+=1),{name:E,key:k,isListField:!0}}),C,f)})))}function wa(i){var r=!1,e=i.length,n=[];return i.length?new Promise(function(t,a){i.forEach(function(o,s){o.catch(function(u){return r=!0,u}).then(function(u){e-=1,n[s]=u,!(e>0)&&(r&&a(n),t(n))})})}):Promise.resolve([])}var Yn="__@field_split__";function Gt(i){return i.map(function(r){return"".concat(ue(r),":").concat(r)}).join(Yn)}var wr=function(){function i(){Vr(this,i),p(this,"kvs",new Map)}return Rr(i,[{key:"set",value:function(e,n){this.kvs.set(Gt(e),n)}},{key:"get",value:function(e){return this.kvs.get(Gt(e))}},{key:"update",value:function(e,n){var t=this.get(e),a=n(t);a?this.set(e,a):this.delete(e)}},{key:"delete",value:function(e){this.kvs.delete(Gt(e))}},{key:"map",value:function(e){return A(this.kvs.entries()).map(function(n){var t=K(n,2),a=t[0],o=t[1],s=a.split(Yn);return e({key:s.map(function(u){var c=u.match(/^([^:]*):(.*)$/),l=K(c,3),v=l[1],h=l[2];return v==="number"?Number(h):h}),value:o})})}},{key:"toJSON",value:function(){var e={};return this.map(function(n){var t=n.key,a=n.value;return e[t.join(".")]=a,null}),e}}]),i}(),Ca=["name"],Pa=Rr(function i(r){var e=this;Vr(this,i),p(this,"formHooked",!1),p(this,"forceRootUpdate",void 0),p(this,"subscribable",!0),p(this,"store",{}),p(this,"fieldEntities",[]),p(this,"initialValues",{}),p(this,"callbacks",{}),p(this,"validateMessages",null),p(this,"preserve",null),p(this,"lastValidatePromise",null),p(this,"getForm",function(){return{getFieldValue:e.getFieldValue,getFieldsValue:e.getFieldsValue,getFieldError:e.getFieldError,getFieldWarning:e.getFieldWarning,getFieldsError:e.getFieldsError,isFieldsTouched:e.isFieldsTouched,isFieldTouched:e.isFieldTouched,isFieldValidating:e.isFieldValidating,isFieldsValidating:e.isFieldsValidating,resetFields:e.resetFields,setFields:e.setFields,setFieldValue:e.setFieldValue,setFieldsValue:e.setFieldsValue,validateFields:e.validateFields,submit:e.submit,_init:!0,getInternalHooks:e.getInternalHooks}}),p(this,"getInternalHooks",function(n){return n===dr?(e.formHooked=!0,{dispatch:e.dispatch,initEntityValue:e.initEntityValue,registerField:e.registerField,useSubscribe:e.useSubscribe,setInitialValues:e.setInitialValues,destroyForm:e.destroyForm,setCallbacks:e.setCallbacks,setValidateMessages:e.setValidateMessages,getFields:e.getFields,setPreserve:e.setPreserve,getInitialValue:e.getInitialValue,registerWatch:e.registerWatch}):(Xe(!1,"`getInternalHooks` is internal usage. Should not call directly."),null)}),p(this,"useSubscribe",function(n){e.subscribable=n}),p(this,"prevWithoutPreserves",null),p(this,"setInitialValues",function(n,t){if(e.initialValues=n||{},t){var a,o=Lr(n,e.store);(a=e.prevWithoutPreserves)===null||a===void 0||a.map(function(s){var u=s.key;o=Qe(o,u,fr(n,u))}),e.prevWithoutPreserves=null,e.updateStore(o)}}),p(this,"destroyForm",function(n){if(n)e.updateStore({});else{var t=new wr;e.getFieldEntities(!0).forEach(function(a){e.isMergedPreserve(a.isPreserve())||t.set(a.getNamePath(),!0)}),e.prevWithoutPreserves=t}}),p(this,"getInitialValue",function(n){var t=fr(e.initialValues,n);return n.length?Lr(t):t}),p(this,"setCallbacks",function(n){e.callbacks=n}),p(this,"setValidateMessages",function(n){e.validateMessages=n}),p(this,"setPreserve",function(n){e.preserve=n}),p(this,"watchList",[]),p(this,"registerWatch",function(n){return e.watchList.push(n),function(){e.watchList=e.watchList.filter(function(t){return t!==n})}}),p(this,"notifyWatch",function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(e.watchList.length){var t=e.getFieldsValue(),a=e.getFieldsValue(!0);e.watchList.forEach(function(o){o(t,a,n)})}}),p(this,"timeoutId",null),p(this,"warningUnhooked",function(){}),p(this,"updateStore",function(n){e.store=n}),p(this,"getFieldEntities",function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return n?e.fieldEntities.filter(function(t){return t.getNamePath().length}):e.fieldEntities}),p(this,"getFieldsMap",function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=new wr;return e.getFieldEntities(n).forEach(function(a){var o=a.getNamePath();t.set(o,a)}),t}),p(this,"getFieldEntitiesForNamePathList",function(n){if(!n)return e.getFieldEntities(!0);var t=e.getFieldsMap(!0);return n.map(function(a){var o=Y(a);return t.get(o)||{INVALIDATE_NAME_PATH:Y(a)}})}),p(this,"getFieldsValue",function(n,t){e.warningUnhooked();var a,o,s;if(n===!0||Array.isArray(n)?(a=n,o=t):n&&ue(n)==="object"&&(s=n.strict,o=n.filter),a===!0&&!o)return e.store;var u=e.getFieldEntitiesForNamePathList(Array.isArray(a)?a:null),c=[];return u.forEach(function(l){var v,h,F="INVALIDATE_NAME_PATH"in l?l.INVALIDATE_NAME_PATH:l.getNamePath();if(s){var m,y;if((m=(y=l).isList)!==null&&m!==void 0&&m.call(y))return}else if(!a&&(v=(h=l).isListField)!==null&&v!==void 0&&v.call(h))return;if(!o)c.push(F);else{var f="getMeta"in l?l.getMeta():null;o(f)&&c.push(F)}}),En(e.store,c.map(Y))}),p(this,"getFieldValue",function(n){e.warningUnhooked();var t=Y(n);return fr(e.store,t)}),p(this,"getFieldsError",function(n){e.warningUnhooked();var t=e.getFieldEntitiesForNamePathList(n);return t.map(function(a,o){return a&&!("INVALIDATE_NAME_PATH"in a)?{name:a.getNamePath(),errors:a.getErrors(),warnings:a.getWarnings()}:{name:Y(n[o]),errors:[],warnings:[]}})}),p(this,"getFieldError",function(n){e.warningUnhooked();var t=Y(n),a=e.getFieldsError([t])[0];return a.errors}),p(this,"getFieldWarning",function(n){e.warningUnhooked();var t=Y(n),a=e.getFieldsError([t])[0];return a.warnings}),p(this,"isFieldsTouched",function(){e.warningUnhooked();for(var n=arguments.length,t=new Array(n),a=0;a<n;a++)t[a]=arguments[a];var o=t[0],s=t[1],u,c=!1;t.length===0?u=null:t.length===1?Array.isArray(o)?(u=o.map(Y),c=!1):(u=null,c=o):(u=o.map(Y),c=s);var l=e.getFieldEntities(!0),v=function(f){return f.isFieldTouched()};if(!u)return c?l.every(function(y){return v(y)||y.isList()}):l.some(v);var h=new wr;u.forEach(function(y){h.set(y,[])}),l.forEach(function(y){var f=y.getNamePath();u.forEach(function(b){b.every(function(g,w){return f[w]===g})&&h.update(b,function(g){return[].concat(A(g),[y])})})});var F=function(f){return f.some(v)},m=h.map(function(y){var f=y.value;return f});return c?m.every(F):m.some(F)}),p(this,"isFieldTouched",function(n){return e.warningUnhooked(),e.isFieldsTouched([n])}),p(this,"isFieldsValidating",function(n){e.warningUnhooked();var t=e.getFieldEntities();if(!n)return t.some(function(o){return o.isFieldValidating()});var a=n.map(Y);return t.some(function(o){var s=o.getNamePath();return Pr(a,s)&&o.isFieldValidating()})}),p(this,"isFieldValidating",function(n){return e.warningUnhooked(),e.isFieldsValidating([n])}),p(this,"resetWithFieldInitialValue",function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=new wr,a=e.getFieldEntities(!0);a.forEach(function(u){var c=u.props.initialValue,l=u.getNamePath();if(c!==void 0){var v=t.get(l)||new Set;v.add({entity:u,value:c}),t.set(l,v)}});var o=function(c){c.forEach(function(l){var v=l.props.initialValue;if(v!==void 0){var h=l.getNamePath(),F=e.getInitialValue(h);if(F!==void 0)Xe(!1,"Form already set 'initialValues' with path '".concat(h.join("."),"'. Field can not overwrite it."));else{var m=t.get(h);if(m&&m.size>1)Xe(!1,"Multiple Field with path '".concat(h.join("."),"' set 'initialValue'. Can not decide which one to pick."));else if(m){var y=e.getFieldValue(h),f=l.isListField();!f&&(!n.skipExist||y===void 0)&&e.updateStore(Qe(e.store,h,A(m)[0].value))}}}})},s;n.entities?s=n.entities:n.namePathList?(s=[],n.namePathList.forEach(function(u){var c=t.get(u);if(c){var l;(l=s).push.apply(l,A(A(c).map(function(v){return v.entity})))}})):s=a,o(s)}),p(this,"resetFields",function(n){e.warningUnhooked();var t=e.store;if(!n){e.updateStore(Lr(e.initialValues)),e.resetWithFieldInitialValue(),e.notifyObservers(t,null,{type:"reset"}),e.notifyWatch();return}var a=n.map(Y);a.forEach(function(o){var s=e.getInitialValue(o);e.updateStore(Qe(e.store,o,s))}),e.resetWithFieldInitialValue({namePathList:a}),e.notifyObservers(t,a,{type:"reset"}),e.notifyWatch(a)}),p(this,"setFields",function(n){e.warningUnhooked();var t=e.store,a=[];n.forEach(function(o){var s=o.name,u=pt(o,Ca),c=Y(s);a.push(c),"value"in u&&e.updateStore(Qe(e.store,c,u.value)),e.notifyObservers(t,[c],{type:"setField",data:o})}),e.notifyWatch(a)}),p(this,"getFields",function(){var n=e.getFieldEntities(!0),t=n.map(function(a){var o=a.getNamePath(),s=a.getMeta(),u=R(R({},s),{},{name:o,value:e.getFieldValue(o)});return Object.defineProperty(u,"originRCField",{value:!0}),u});return t}),p(this,"initEntityValue",function(n){var t=n.props.initialValue;if(t!==void 0){var a=n.getNamePath(),o=fr(e.store,a);o===void 0&&e.updateStore(Qe(e.store,a,t))}}),p(this,"isMergedPreserve",function(n){var t=n!==void 0?n:e.preserve;return t??!0}),p(this,"registerField",function(n){e.fieldEntities.push(n);var t=n.getNamePath();if(e.notifyWatch([t]),n.props.initialValue!==void 0){var a=e.store;e.resetWithFieldInitialValue({entities:[n],skipExist:!0}),e.notifyObservers(a,[n.getNamePath()],{type:"valueUpdate",source:"internal"})}return function(o,s){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(e.fieldEntities=e.fieldEntities.filter(function(v){return v!==n}),!e.isMergedPreserve(s)&&(!o||u.length>1)){var c=o?void 0:e.getInitialValue(t);if(t.length&&e.getFieldValue(t)!==c&&e.fieldEntities.every(function(v){return!Zn(v.getNamePath(),t)})){var l=e.store;e.updateStore(Qe(l,t,c,!0)),e.notifyObservers(l,[t],{type:"remove"}),e.triggerDependenciesUpdate(l,t)}}e.notifyWatch([t])}}),p(this,"dispatch",function(n){switch(n.type){case"updateValue":{var t=n.namePath,a=n.value;e.updateValue(t,a);break}case"validateField":{var o=n.namePath,s=n.triggerName;e.validateFields([o],{triggerName:s});break}}}),p(this,"notifyObservers",function(n,t,a){if(e.subscribable){var o=R(R({},a),{},{store:e.getFieldsValue(!0)});e.getFieldEntities().forEach(function(s){var u=s.onStoreChange;u(n,t,o)})}else e.forceRootUpdate()}),p(this,"triggerDependenciesUpdate",function(n,t){var a=e.getDependencyChildrenFields(t);return a.length&&e.validateFields(a),e.notifyObservers(n,a,{type:"dependenciesUpdate",relatedFields:[t].concat(A(a))}),a}),p(this,"updateValue",function(n,t){var a=Y(n),o=e.store;e.updateStore(Qe(e.store,a,t)),e.notifyObservers(o,[a],{type:"valueUpdate",source:"internal"}),e.notifyWatch([a]);var s=e.triggerDependenciesUpdate(o,a),u=e.callbacks.onValuesChange;if(u){var c=En(e.store,[a]);u(c,e.getFieldsValue())}e.triggerOnFieldsChange([a].concat(A(s)))}),p(this,"setFieldsValue",function(n){e.warningUnhooked();var t=e.store;if(n){var a=Lr(e.store,n);e.updateStore(a)}e.notifyObservers(t,null,{type:"valueUpdate",source:"external"}),e.notifyWatch()}),p(this,"setFieldValue",function(n,t){e.setFields([{name:n,value:t,errors:[],warnings:[]}])}),p(this,"getDependencyChildrenFields",function(n){var t=new Set,a=[],o=new wr;e.getFieldEntities().forEach(function(u){var c=u.props.dependencies;(c||[]).forEach(function(l){var v=Y(l);o.update(v,function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Set;return h.add(u),h})})});var s=function u(c){var l=o.get(c)||new Set;l.forEach(function(v){if(!t.has(v)){t.add(v);var h=v.getNamePath();v.isFieldDirty()&&h.length&&(a.push(h),u(h))}})};return s(n),a}),p(this,"triggerOnFieldsChange",function(n,t){var a=e.callbacks.onFieldsChange;if(a){var o=e.getFields();if(t){var s=new wr;t.forEach(function(c){var l=c.name,v=c.errors;s.set(l,v)}),o.forEach(function(c){c.errors=s.get(c.name)||c.errors})}var u=o.filter(function(c){var l=c.name;return Pr(n,l)});u.length&&a(u,o)}}),p(this,"validateFields",function(n,t){e.warningUnhooked();var a,o;Array.isArray(n)||typeof n=="string"||typeof t=="string"?(a=n,o=t):o=n;var s=!!a,u=s?a.map(Y):[],c=[],l=String(Date.now()),v=new Set,h=o||{},F=h.recursive,m=h.dirty;e.getFieldEntities(!0).forEach(function(g){if(s||u.push(g.getNamePath()),!(!g.props.rules||!g.props.rules.length)&&!(m&&!g.isFieldDirty())){var w=g.getNamePath();if(v.add(w.join(l)),!s||Pr(u,w,F)){var V=g.validateRules(R({validateMessages:R(R({},Jn),e.validateMessages)},o));c.push(V.then(function(){return{name:w,errors:[],warnings:[]}}).catch(function(P){var C,x=[],S=[];return(C=P.forEach)===null||C===void 0||C.call(P,function(E){var k=E.rule.warningOnly,$=E.errors;k?S.push.apply(S,A($)):x.push.apply(x,A($))}),x.length?Promise.reject({name:w,errors:x,warnings:S}):{name:w,errors:x,warnings:S}}))}}});var y=wa(c);e.lastValidatePromise=y,y.catch(function(g){return g}).then(function(g){var w=g.map(function(V){var P=V.name;return P});e.notifyObservers(e.store,w,{type:"validateFinish"}),e.triggerOnFieldsChange(w,g)});var f=y.then(function(){return e.lastValidatePromise===y?Promise.resolve(e.getFieldsValue(u)):Promise.reject([])}).catch(function(g){var w=g.filter(function(V){return V&&V.errors.length});return Promise.reject({values:e.getFieldsValue(u),errorFields:w,outOfDate:e.lastValidatePromise!==y})});f.catch(function(g){return g});var b=u.filter(function(g){return v.has(g.join(l))});return e.triggerOnFieldsChange(b),f}),p(this,"submit",function(){e.warningUnhooked(),e.validateFields().then(function(n){var t=e.callbacks.onFinish;if(t)try{t(n)}catch(a){console.error(a)}}).catch(function(n){var t=e.callbacks.onFinishFailed;t&&t(n)})}),this.forceRootUpdate=r});function Xn(i){var r=d.useRef(),e=d.useState({}),n=K(e,2),t=n[1];if(!r.current)if(i)r.current=i;else{var a=function(){t({})},o=new Pa(a);r.current=o.getForm()}return[r.current]}var un=d.createContext({triggerFormChange:function(){},triggerFormFinish:function(){},registerForm:function(){},unregisterForm:function(){}}),Ea=function(r){var e=r.validateMessages,n=r.onFormChange,t=r.onFormFinish,a=r.children,o=d.useContext(un),s=d.useRef({});return d.createElement(un.Provider,{value:R(R({},o),{},{validateMessages:R(R({},o.validateMessages),e),triggerFormChange:function(c,l){n&&n(c,{changedFields:l,forms:s.current}),o.triggerFormChange(c,l)},triggerFormFinish:function(c,l){t&&t(c,{values:l,forms:s.current}),o.triggerFormFinish(c,l)},registerForm:function(c,l){c&&(s.current=R(R({},s.current),{},p({},c,l))),o.registerForm(c,l)},unregisterForm:function(c){var l=R({},s.current);delete l[c],s.current=l,o.unregisterForm(c)}})},a)},Ma=["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed","clearOnDestroy"],Va=function(r,e){var n=r.name,t=r.initialValues,a=r.fields,o=r.form,s=r.preserve,u=r.children,c=r.component,l=c===void 0?"form":c,v=r.validateMessages,h=r.validateTrigger,F=h===void 0?"onChange":h,m=r.onValuesChange,y=r.onFieldsChange,f=r.onFinish,b=r.onFinishFailed,g=r.clearOnDestroy,w=pt(r,Ma),V=d.useRef(null),P=d.useContext(un),C=Xn(o),x=K(C,1),S=x[0],E=S.getInternalHooks(dr),k=E.useSubscribe,$=E.setInitialValues,L=E.setCallbacks,O=E.setValidateMessages,T=E.setPreserve,J=E.destroyForm;d.useImperativeHandle(e,function(){return R(R({},S),{},{nativeElement:V.current})}),d.useEffect(function(){return P.registerForm(n,S),function(){P.unregisterForm(n)}},[P,S,n]),O(R(R({},P.validateMessages),v)),L({onValuesChange:m,onFieldsChange:function(_){if(P.triggerFormChange(n,_),y){for(var Q=arguments.length,Re=new Array(Q>1?Q-1:0),ke=1;ke<Q;ke++)Re[ke-1]=arguments[ke];y.apply(void 0,[_].concat(Re))}},onFinish:function(_){P.triggerFormFinish(n,_),f&&f(_)},onFinishFailed:b}),T(s);var I=d.useRef(null);$(t,!I.current),I.current||(I.current=!0),d.useEffect(function(){return function(){return J(g)}},[]);var Z,ee=typeof u=="function";if(ee){var ne=S.getFieldsValue(!0);Z=u(ne,S)}else Z=u;k(!ee);var q=d.useRef();d.useEffect(function(){ya(q.current||[],a||[])||S.setFields(a||[]),q.current=a},[a,S]);var Le=d.useMemo(function(){return R(R({},S),{},{validateTrigger:F})},[S,F]),le=d.createElement(yt.Provider,{value:null},d.createElement(Mr.Provider,{value:Le},Z));return l===!1?le:d.createElement(l,zr({},w,{ref:V,onSubmit:function(_){_.preventDefault(),_.stopPropagation(),S.submit()},onReset:function(_){var Q;_.preventDefault(),S.resetFields(),(Q=w.onReset)===null||Q===void 0||Q.call(w,_)}}),le)};function Vn(i){try{return JSON.stringify(i)}catch{return Math.random()}}function Ra(){for(var i=arguments.length,r=new Array(i),e=0;e<i;e++)r[e]=arguments[e];var n=r[0],t=r[1],a=t===void 0?{}:t,o=Ai(a)?{form:a}:a,s=o.form,u=d.useState(),c=K(u,2),l=c[0],v=c[1],h=d.useMemo(function(){return Vn(l)},[l]),F=d.useRef(h);F.current=h;var m=d.useContext(Mr),y=s||m,f=y&&y._init,b=Y(n),g=d.useRef(b);return g.current=b,d.useEffect(function(){if(f){var w=y.getFieldsValue,V=y.getInternalHooks,P=V(dr),C=P.registerWatch,x=function($,L){var O=o.preserve?L:$;return typeof n=="function"?n(O):fr(O,g.current)},S=C(function(k,$){var L=x(k,$),O=Vn(L);F.current!==O&&(F.current=O,v(L))}),E=x(w(),w(!0));return l!==E&&v(E),S}},[f]),l}var ka=d.forwardRef(Va),Ur=ka;Ur.FormProvider=Ea;Ur.Field=Qn;Ur.List=Fa;Ur.useForm=Xn;Ur.useWatch=Ra;const Rn=d.createContext({}),Za=i=>{let{children:r,status:e,override:n}=i;const t=d.useContext(Rn),a=d.useMemo(()=>{const o=Object.assign({},t);return n&&delete o.isFormItemInput,e&&(delete o.status,delete o.hasFeedback,delete o.feedbackIcon),o},[e,n,t]);return d.createElement(Rn.Provider,{value:a},r)},Qa=d.createContext(void 0),xa=function(){if(typeof navigator>"u"||typeof window>"u")return!1;var i=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(i)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(i==null?void 0:i.substr(0,4))};function Sa(i){var r=i.prefixCls,e=i.align,n=i.arrow,t=i.arrowPos,a=n||{},o=a.className,s=a.content,u=t.x,c=u===void 0?0:u,l=t.y,v=l===void 0?0:l,h=d.useRef();if(!e||!e.points)return null;var F={position:"absolute"};if(e.autoArrow!==!1){var m=e.points[0],y=e.points[1],f=m[0],b=m[1],g=y[0],w=y[1];f===g||!["t","b"].includes(f)?F.top=v:f==="t"?F.top=0:F.bottom=0,b===w||!["l","r"].includes(b)?F.left=c:b==="l"?F.left=0:F.right=0}return d.createElement("div",{ref:h,className:vr("".concat(r,"-arrow"),o),style:F},s)}function Na(i){var r=i.prefixCls,e=i.open,n=i.zIndex,t=i.mask,a=i.motion;return t?d.createElement(qn,zr({},a,{motionAppear:!0,visible:e,removeOnLeave:!0}),function(o){var s=o.className;return d.createElement("div",{style:{zIndex:n},className:vr("".concat(r,"-mask"),s)})}):null}var $a=d.memo(function(i){var r=i.children;return r},function(i,r){return r.cache}),Ta=d.forwardRef(function(i,r){var e=i.popup,n=i.className,t=i.prefixCls,a=i.style,o=i.target,s=i.onVisibleChanged,u=i.open,c=i.keepDom,l=i.fresh,v=i.onClick,h=i.mask,F=i.arrow,m=i.arrowPos,y=i.align,f=i.motion,b=i.maskMotion,g=i.forceRender,w=i.getPopupContainer,V=i.autoDestroy,P=i.portal,C=i.zIndex,x=i.onMouseEnter,S=i.onMouseLeave,E=i.onPointerEnter,k=i.onPointerDownCapture,$=i.ready,L=i.offsetX,O=i.offsetY,T=i.offsetR,J=i.offsetB,I=i.onAlign,Z=i.onPrepare,ee=i.stretch,ne=i.targetWidth,q=i.targetHeight,Le=typeof e=="function"?e():e,le=u||c,X=(w==null?void 0:w.length)>0,_=d.useState(!w||!X),Q=K(_,2),Re=Q[0],ke=Q[1];if(_e(function(){!Re&&X&&o&&ke(!0)},[Re,X,o]),!Re)return null;var xe="auto",fe={left:"-1000vw",top:"-1000vh",right:xe,bottom:xe};if($||!u){var ze,er=y.points,ge=y.dynamicInset||((ze=y._experimental)===null||ze===void 0?void 0:ze.dynamicInset),Se=ge&&er[0][1]==="r",Ce=ge&&er[0][0]==="b";Se?(fe.right=T,fe.left=xe):(fe.left=L,fe.right=xe),Ce?(fe.bottom=J,fe.top=xe):(fe.top=O,fe.bottom=xe)}var ce={};return ee&&(ee.includes("height")&&q?ce.height=q:ee.includes("minHeight")&&q&&(ce.minHeight=q),ee.includes("width")&&ne?ce.width=ne:ee.includes("minWidth")&&ne&&(ce.minWidth=ne)),u||(ce.pointerEvents="none"),d.createElement(P,{open:g||le,getContainer:w&&function(){return w(o)},autoDestroy:V},d.createElement(Na,{prefixCls:t,open:u,zIndex:C,mask:h,motion:b}),d.createElement(dn,{onResize:I,disabled:!u},function(kr){return d.createElement(qn,zr({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:g,leavedClassName:"".concat(t,"-hidden")},f,{onAppearPrepare:Z,onEnterPrepare:Z,visible:u,onVisibleChanged:function(me){var Ne;f==null||(Ne=f.onVisibleChanged)===null||Ne===void 0||Ne.call(f,me),s(me)}}),function(je,me){var Ne=je.className,rr=je.style,ae=vr(t,Ne,n);return d.createElement("div",{ref:ii(kr,r,me),className:ae,style:R(R(R(R({"--arrow-x":"".concat(m.x||0,"px"),"--arrow-y":"".concat(m.y||0,"px")},fe),ce),rr),{},{boxSizing:"border-box",zIndex:C},a),onMouseEnter:x,onMouseLeave:S,onPointerEnter:E,onClick:v,onPointerDownCapture:k},F&&d.createElement(Sa,{prefixCls:t,arrow:F,arrowPos:m,align:y}),d.createElement($a,{cache:!u&&!l},Le))})}))}),Oa=d.forwardRef(function(i,r){var e=i.children,n=i.getTriggerDOMNode,t=An(e),a=d.useCallback(function(s){ai(r,n?n(s):s)},[n]),o=Dn(a,_n(e));return t?d.cloneElement(e,{ref:o}):e}),kn=d.createContext(null);function xn(i){return i?Array.isArray(i)?i:[i]:[]}function Aa(i,r,e,n){return d.useMemo(function(){var t=xn(e??r),a=xn(n??r),o=new Set(t),s=new Set(a);return i&&(o.has("hover")&&(o.delete("hover"),o.add("click")),s.has("hover")&&(s.delete("hover"),s.add("click"))),[o,s]},[i,r,e,n])}function _a(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],e=arguments.length>2?arguments[2]:void 0;return e?i[0]===r[0]:i[0]===r[0]&&i[1]===r[1]}function Da(i,r,e,n){for(var t=e.points,a=Object.keys(i),o=0;o<a.length;o+=1){var s,u=a[o];if(_a((s=i[u])===null||s===void 0?void 0:s.points,t,n))return"".concat(r,"-placement-").concat(u)}return""}function Sn(i,r,e,n){return r||(e?{motionName:"".concat(i,"-").concat(e)}:n?{motionName:n}:null)}function Br(i){return i.ownerDocument.defaultView}function ln(i){for(var r=[],e=i==null?void 0:i.parentElement,n=["hidden","scroll","clip","auto"];e;){var t=Br(e).getComputedStyle(e),a=t.overflowX,o=t.overflowY,s=t.overflow;[a,o,s].some(function(u){return n.includes(u)})&&r.push(e),e=e.parentElement}return r}function Ir(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return Number.isNaN(i)?r:i}function Dr(i){return Ir(parseFloat(i),0)}function Nn(i,r){var e=R({},i);return(r||[]).forEach(function(n){if(!(n instanceof HTMLBodyElement||n instanceof HTMLHtmlElement)){var t=Br(n).getComputedStyle(n),a=t.overflow,o=t.overflowClipMargin,s=t.borderTopWidth,u=t.borderBottomWidth,c=t.borderLeftWidth,l=t.borderRightWidth,v=n.getBoundingClientRect(),h=n.offsetHeight,F=n.clientHeight,m=n.offsetWidth,y=n.clientWidth,f=Dr(s),b=Dr(u),g=Dr(c),w=Dr(l),V=Ir(Math.round(v.width/m*1e3)/1e3),P=Ir(Math.round(v.height/h*1e3)/1e3),C=(m-y-g-w)*V,x=(h-F-f-b)*P,S=f*P,E=b*P,k=g*V,$=w*V,L=0,O=0;if(a==="clip"){var T=Dr(o);L=T*V,O=T*P}var J=v.x+k-L,I=v.y+S-O,Z=J+v.width+2*L-k-$-C,ee=I+v.height+2*O-S-E-x;e.left=Math.max(e.left,J),e.top=Math.max(e.top,I),e.right=Math.min(e.right,Z),e.bottom=Math.min(e.bottom,ee)}}),e}function $n(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e="".concat(r),n=e.match(/^(.*)\%$/);return n?i*(parseFloat(n[1])/100):parseFloat(e)}function Tn(i,r){var e=r||[],n=K(e,2),t=n[0],a=n[1];return[$n(i.width,t),$n(i.height,a)]}function On(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return[i[0],i[1]]}function Cr(i,r){var e=r[0],n=r[1],t,a;return e==="t"?a=i.y:e==="b"?a=i.y+i.height:a=i.y+i.height/2,n==="l"?t=i.x:n==="r"?t=i.x+i.width:t=i.x+i.width/2,{x:t,y:a}}function Ze(i,r){var e={t:"b",b:"t",l:"r",r:"l"};return i.map(function(n,t){return t===r?e[n]||"c":n}).join("")}function La(i,r,e,n,t,a,o){var s=d.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:t[n]||{}}),u=K(s,2),c=u[0],l=u[1],v=d.useRef(0),h=d.useMemo(function(){return r?ln(r):[]},[r]),F=d.useRef({}),m=function(){F.current={}};i||m();var y=cr(function(){if(r&&e&&i){let Fe=function(br,Ke){var Je=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Gr,_r=_.x+br,ct=_.y+Ke,Wt=_r+Se,It=ct+ge,zt=Math.max(_r,Je.left),M=Math.max(ct,Je.top),N=Math.min(Wt,Je.right),B=Math.min(It,Je.bottom);return Math.max(0,(N-zt)*(B-M))},lt=function(){ar=_.y+U,or=ar+ge,We=_.x+j,gr=We+Se};var g,w,V,P,C=r,x=C.ownerDocument,S=Br(C),E=S.getComputedStyle(C),k=E.width,$=E.height,L=E.position,O=C.style.left,T=C.style.top,J=C.style.right,I=C.style.bottom,Z=C.style.overflow,ee=R(R({},t[n]),a),ne=x.createElement("div");(g=C.parentElement)===null||g===void 0||g.appendChild(ne),ne.style.left="".concat(C.offsetLeft,"px"),ne.style.top="".concat(C.offsetTop,"px"),ne.style.position=L,ne.style.height="".concat(C.offsetHeight,"px"),ne.style.width="".concat(C.offsetWidth,"px"),C.style.left="0",C.style.top="0",C.style.right="auto",C.style.bottom="auto",C.style.overflow="hidden";var q;if(Array.isArray(e))q={x:e[0],y:e[1],width:0,height:0};else{var Le,le,X=e.getBoundingClientRect();X.x=(Le=X.x)!==null&&Le!==void 0?Le:X.left,X.y=(le=X.y)!==null&&le!==void 0?le:X.top,q={x:X.x,y:X.y,width:X.width,height:X.height}}var _=C.getBoundingClientRect();_.x=(w=_.x)!==null&&w!==void 0?w:_.left,_.y=(V=_.y)!==null&&V!==void 0?V:_.top;var Q=x.documentElement,Re=Q.clientWidth,ke=Q.clientHeight,xe=Q.scrollWidth,fe=Q.scrollHeight,ze=Q.scrollTop,er=Q.scrollLeft,ge=_.height,Se=_.width,Ce=q.height,ce=q.width,kr={left:0,top:0,right:Re,bottom:ke},je={left:-er,top:-ze,right:xe-er,bottom:fe-ze},me=ee.htmlRegion,Ne="visible",rr="visibleFirst";me!=="scroll"&&me!==rr&&(me=Ne);var ae=me===rr,Ft=Nn(je,h),H=Nn(kr,h),Gr=me===Ne?H:Ft,tr=ae?H:Gr;C.style.left="auto",C.style.top="auto",C.style.right="0",C.style.bottom="0";var oe=C.getBoundingClientRect();C.style.left=O,C.style.top=T,C.style.right=J,C.style.bottom=I,C.style.overflow=Z,(P=C.parentElement)===null||P===void 0||P.removeChild(ne);var He=Ir(Math.round(Se/parseFloat(k)*1e3)/1e3),qe=Ir(Math.round(ge/parseFloat($)*1e3)/1e3);if(He===0||qe===0||Kt(e)&&!Oi(e))return;var wt=ee.offset,Ct=ee.targetOffset,Kr=Tn(_,wt),Pe=K(Kr,2),Ee=Pe[0],ye=Pe[1],Pt=Tn(q,Ct),nr=K(Pt,2),pe=nr[0],Ue=nr[1];q.x-=pe,q.y-=Ue;var Et=ee.points||[],Jr=K(Et,2),Mt=Jr[0],Vt=Jr[1],$e=On(Vt),de=On(Mt),xr=Cr(q,$e),se=Cr(_,de),Be=R({},ee),j=xr.x-se.x+Ee,U=xr.y-se.y+ye,Me=Fe(j,U),ir=Fe(j,U,H),Sr=Cr(q,["t","l"]),be=Cr(_,["t","l"]),Zr=Cr(q,["b","r"]),Nr=Cr(_,["b","r"]),Ge=ee.overflow||{},Qr=Ge.adjustX,Rt=Ge.adjustY,$r=Ge.shiftX,hr=Ge.shiftY,Tr=function(Ke){return typeof Ke=="boolean"?Ke:Ke>=0},ar,or,We,gr;lt();var sr=Tr(Rt),Yr=de[0]===$e[0];if(sr&&de[0]==="t"&&(or>tr.bottom||F.current.bt)){var ie=U;Yr?ie-=ge-Ce:ie=Sr.y-Nr.y-ye;var Xr=Fe(j,ie),kt=Fe(j,ie,H);Xr>Me||Xr===Me&&(!ae||kt>=ir)?(F.current.bt=!0,U=ie,ye=-ye,Be.points=[Ze(de,0),Ze($e,0)]):F.current.bt=!1}if(sr&&de[0]==="b"&&(ar<tr.top||F.current.tb)){var ur=U;Yr?ur+=ge-Ce:ur=Zr.y-be.y-ye;var et=Fe(j,ur),xt=Fe(j,ur,H);et>Me||et===Me&&(!ae||xt>=ir)?(F.current.tb=!0,U=ur,ye=-ye,Be.points=[Ze(de,0),Ze($e,0)]):F.current.tb=!1}var rt=Tr(Qr),tt=de[1]===$e[1];if(rt&&de[1]==="l"&&(gr>tr.right||F.current.rl)){var lr=j;tt?lr-=Se-ce:lr=Sr.x-Nr.x-Ee;var nt=Fe(lr,U),mr=Fe(lr,U,H);nt>Me||nt===Me&&(!ae||mr>=ir)?(F.current.rl=!0,j=lr,Ee=-Ee,Be.points=[Ze(de,1),Ze($e,1)]):F.current.rl=!1}if(rt&&de[1]==="r"&&(We<tr.left||F.current.lr)){var Ie=j;tt?Ie+=Se-ce:Ie=Zr.x-be.x-Ee;var it=Fe(Ie,U),at=Fe(Ie,U,H);it>Me||it===Me&&(!ae||at>=ir)?(F.current.lr=!0,j=Ie,Ee=-Ee,Be.points=[Ze(de,1),Ze($e,1)]):F.current.lr=!1}lt();var Te=$r===!0?0:$r;typeof Te=="number"&&(We<H.left&&(j-=We-H.left-Ee,q.x+ce<H.left+Te&&(j+=q.x-H.left+ce-Te)),gr>H.right&&(j-=gr-H.right-Ee,q.x>H.right-Te&&(j+=q.x-H.right+Te)));var Ve=hr===!0?0:hr;typeof Ve=="number"&&(ar<H.top&&(U-=ar-H.top-ye,q.y+Ce<H.top+Ve&&(U+=q.y-H.top+Ce-Ve)),or>H.bottom&&(U-=or-H.bottom-ye,q.y>H.bottom-Ve&&(U+=q.y-H.bottom+Ve)));var yr=_.x+j,pr=yr+Se,Oe=_.y+U,St=Oe+ge,ot=q.x,Nt=ot+ce,Or=q.y,$t=Or+Ce,Tt=Math.max(yr,ot),Ot=Math.min(pr,Nt),st=(Tt+Ot)/2,At=st-yr,_t=Math.max(Oe,Or),ut=Math.min(St,$t),Dt=(_t+ut)/2,Lt=Dt-Oe;o==null||o(r,Be);var Ar=oe.right-_.x-(j+_.width),Ae=oe.bottom-_.y-(U+_.height);He===1&&(j=Math.round(j),Ar=Math.round(Ar)),qe===1&&(U=Math.round(U),Ae=Math.round(Ae));var qt={ready:!0,offsetX:j/He,offsetY:U/qe,offsetR:Ar/He,offsetB:Ae/qe,arrowX:At/He,arrowY:Lt/qe,scaleX:He,scaleY:qe,align:Be};l(qt)}}),f=function(){v.current+=1;var w=v.current;Promise.resolve().then(function(){v.current===w&&y()})},b=function(){l(function(w){return R(R({},w),{},{ready:!1})})};return _e(b,[n]),_e(function(){i||b()},[i]),[c.ready,c.offsetX,c.offsetY,c.offsetR,c.offsetB,c.arrowX,c.arrowY,c.scaleX,c.scaleY,c.align,f]}function qa(i,r,e,n,t){_e(function(){if(i&&r&&e){let v=function(){n(),t()};var a=r,o=e,s=ln(a),u=ln(o),c=Br(o),l=new Set([c].concat(A(s),A(u)));return l.forEach(function(h){h.addEventListener("scroll",v,{passive:!0})}),c.addEventListener("resize",v,{passive:!0}),n(),function(){l.forEach(function(h){h.removeEventListener("scroll",v),c.removeEventListener("resize",v)})}}},[i,r,e])}function Wa(i,r,e,n,t,a,o,s){var u=d.useRef(i);u.current=i;var c=d.useRef(!1);d.useEffect(function(){if(r&&n&&(!t||a)){var v=function(){c.current=!1},h=function(f){var b;u.current&&!o(((b=f.composedPath)===null||b===void 0||(b=b.call(f))===null||b===void 0?void 0:b[0])||f.target)&&!c.current&&s(!1)},F=Br(n);F.addEventListener("pointerdown",v,!0),F.addEventListener("mousedown",h,!0),F.addEventListener("contextmenu",h,!0);var m=Jt(e);return m&&(m.addEventListener("mousedown",h,!0),m.addEventListener("contextmenu",h,!0)),function(){F.removeEventListener("pointerdown",v,!0),F.removeEventListener("mousedown",h,!0),F.removeEventListener("contextmenu",h,!0),m&&(m.removeEventListener("mousedown",h,!0),m.removeEventListener("contextmenu",h,!0))}}},[r,e,n,t,a]);function l(){c.current=!0}return l}var Ia=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","fresh","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];function za(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Wn,r=d.forwardRef(function(e,n){var t=e.prefixCls,a=t===void 0?"rc-trigger-popup":t,o=e.children,s=e.action,u=s===void 0?"hover":s,c=e.showAction,l=e.hideAction,v=e.popupVisible,h=e.defaultPopupVisible,F=e.onPopupVisibleChange,m=e.afterPopupVisibleChange,y=e.mouseEnterDelay,f=e.mouseLeaveDelay,b=f===void 0?.1:f,g=e.focusDelay,w=e.blurDelay,V=e.mask,P=e.maskClosable,C=P===void 0?!0:P,x=e.getPopupContainer,S=e.forceRender,E=e.autoDestroy,k=e.destroyPopupOnHide,$=e.popup,L=e.popupClassName,O=e.popupStyle,T=e.popupPlacement,J=e.builtinPlacements,I=J===void 0?{}:J,Z=e.popupAlign,ee=e.zIndex,ne=e.stretch,q=e.getPopupClassNameFromAlign,Le=e.fresh,le=e.alignPoint,X=e.onPopupClick,_=e.onPopupAlign,Q=e.arrow,Re=e.popupMotion,ke=e.maskMotion,xe=e.popupTransitionName,fe=e.popupAnimation,ze=e.maskTransitionName,er=e.maskAnimation,ge=e.className,Se=e.getTriggerDOMNode,Ce=pt(e,Ia),ce=E||k||!1,kr=d.useState(!1),je=K(kr,2),me=je[0],Ne=je[1];_e(function(){Ne(xa())},[]);var rr=d.useRef({}),ae=d.useContext(kn),Ft=d.useMemo(function(){return{registerSubPopup:function(N,B){rr.current[N]=B,ae==null||ae.registerSubPopup(N,B)}}},[ae]),H=oi(),Gr=d.useState(null),tr=K(Gr,2),oe=tr[0],He=tr[1],qe=d.useRef(null),wt=cr(function(M){qe.current=M,Kt(M)&&oe!==M&&He(M),ae==null||ae.registerSubPopup(H,M)}),Ct=d.useState(null),Kr=K(Ct,2),Pe=Kr[0],Ee=Kr[1],ye=d.useRef(null),Pt=cr(function(M){Kt(M)&&Pe!==M&&(Ee(M),ye.current=M)}),nr=d.Children.only(o),pe=(nr==null?void 0:nr.props)||{},Ue={},Et=cr(function(M){var N,B,re=Pe;return(re==null?void 0:re.contains(M))||((N=Jt(re))===null||N===void 0?void 0:N.host)===M||M===re||(oe==null?void 0:oe.contains(M))||((B=Jt(oe))===null||B===void 0?void 0:B.host)===M||M===oe||Object.values(rr.current).some(function(G){return(G==null?void 0:G.contains(M))||M===G})}),Jr=Sn(a,Re,fe,xe),Mt=Sn(a,ke,er,ze),Vt=d.useState(h||!1),$e=K(Vt,2),de=$e[0],xr=$e[1],se=v??de,Be=cr(function(M){v===void 0&&xr(M)});_e(function(){xr(v||!1)},[v]);var j=d.useRef(se);j.current=se;var U=d.useRef([]);U.current=[];var Me=cr(function(M){var N;Be(M),((N=U.current[U.current.length-1])!==null&&N!==void 0?N:se)!==M&&(U.current.push(M),F==null||F(M))}),ir=d.useRef(),Sr=function(){clearTimeout(ir.current)},be=function(N){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;Sr(),B===0?Me(N):ir.current=setTimeout(function(){Me(N)},B*1e3)};d.useEffect(function(){return Sr},[]);var Zr=d.useState(!1),Nr=K(Zr,2),Ge=Nr[0],Qr=Nr[1];_e(function(M){(!M||se)&&Qr(!0)},[se]);var Rt=d.useState(null),$r=K(Rt,2),hr=$r[0],Tr=$r[1],ar=d.useState(null),or=K(ar,2),We=or[0],gr=or[1],sr=function(N){gr([N.clientX,N.clientY])},Yr=La(se,oe,le&&We!==null?We:Pe,T,I,Z,_),ie=K(Yr,11),Xr=ie[0],kt=ie[1],ur=ie[2],et=ie[3],xt=ie[4],rt=ie[5],tt=ie[6],lr=ie[7],nt=ie[8],mr=ie[9],Ie=ie[10],it=Aa(me,u,c,l),at=K(it,2),Te=at[0],Ve=at[1],yr=Te.has("click"),pr=Ve.has("click")||Ve.has("contextMenu"),Oe=cr(function(){Ge||Ie()}),St=function(){j.current&&le&&pr&&be(!1)};qa(se,Pe,oe,Oe,St),_e(function(){Oe()},[We,T]),_e(function(){se&&!(I!=null&&I[T])&&Oe()},[JSON.stringify(Z)]);var ot=d.useMemo(function(){var M=Da(I,a,mr,le);return vr(M,q==null?void 0:q(mr))},[mr,q,I,a,le]);d.useImperativeHandle(n,function(){return{nativeElement:ye.current,popupElement:qe.current,forceAlign:Oe}});var Nt=d.useState(0),Or=K(Nt,2),$t=Or[0],Tt=Or[1],Ot=d.useState(0),st=K(Ot,2),At=st[0],_t=st[1],ut=function(){if(ne&&Pe){var N=Pe.getBoundingClientRect();Tt(N.width),_t(N.height)}},Dt=function(){ut(),Oe()},Lt=function(N){Qr(!1),Ie(),m==null||m(N)},Ar=function(){return new Promise(function(N){ut(),Tr(function(){return N})})};_e(function(){hr&&(Ie(),hr(),Tr(null))},[hr]);function Ae(M,N,B,re){Ue[M]=function(G){var ft;re==null||re(G),be(N,B);for(var jt=arguments.length,hn=new Array(jt>1?jt-1:0),dt=1;dt<jt;dt++)hn[dt-1]=arguments[dt];(ft=pe[M])===null||ft===void 0||ft.call.apply(ft,[pe,G].concat(hn))}}(yr||pr)&&(Ue.onClick=function(M){var N;j.current&&pr?be(!1):!j.current&&yr&&(sr(M),be(!0));for(var B=arguments.length,re=new Array(B>1?B-1:0),G=1;G<B;G++)re[G-1]=arguments[G];(N=pe.onClick)===null||N===void 0||N.call.apply(N,[pe,M].concat(re))});var qt=Wa(se,pr,Pe,oe,V,C,Et,be),Fe=Te.has("hover"),lt=Ve.has("hover"),br,Ke;Fe&&(Ae("onMouseEnter",!0,y,function(M){sr(M)}),Ae("onPointerEnter",!0,y,function(M){sr(M)}),br=function(N){(se||Ge)&&oe!==null&&oe!==void 0&&oe.contains(N.target)&&be(!0,y)},le&&(Ue.onMouseMove=function(M){var N;(N=pe.onMouseMove)===null||N===void 0||N.call(pe,M)})),lt&&(Ae("onMouseLeave",!1,b),Ae("onPointerLeave",!1,b),Ke=function(){be(!1,b)}),Te.has("focus")&&Ae("onFocus",!0,g),Ve.has("focus")&&Ae("onBlur",!1,w),Te.has("contextMenu")&&(Ue.onContextMenu=function(M){var N;j.current&&Ve.has("contextMenu")?be(!1):(sr(M),be(!0)),M.preventDefault();for(var B=arguments.length,re=new Array(B>1?B-1:0),G=1;G<B;G++)re[G-1]=arguments[G];(N=pe.onContextMenu)===null||N===void 0||N.call.apply(N,[pe,M].concat(re))}),ge&&(Ue.className=vr(pe.className,ge));var Je=R(R({},pe),Ue),_r={},ct=["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"];ct.forEach(function(M){Ce[M]&&(_r[M]=function(){for(var N,B=arguments.length,re=new Array(B),G=0;G<B;G++)re[G]=arguments[G];(N=Je[M])===null||N===void 0||N.call.apply(N,[Je].concat(re)),Ce[M].apply(Ce,re)})});var Wt=d.cloneElement(nr,R(R({},Je),_r)),It={x:rt,y:tt},zt=Q?R({},Q!==!0?Q:{}):null;return d.createElement(d.Fragment,null,d.createElement(dn,{disabled:!se,ref:Pt,onResize:Dt},d.createElement(Oa,{getTriggerDOMNode:Se},Wt)),d.createElement(kn.Provider,{value:Ft},d.createElement(Ta,{portal:i,ref:wt,prefixCls:a,popup:$,className:vr(L,ot),style:O,target:Pe,onMouseEnter:br,onMouseLeave:Ke,onPointerEnter:br,zIndex:ee,open:se,keepDom:Ge,fresh:Le,onClick:X,onPointerDownCapture:qt,mask:V,motion:Jr,maskMotion:Mt,onVisibleChanged:Lt,onPrepare:Ar,forceRender:S,autoDestroy:ce,getPopupContainer:x,align:mr,arrow:zt,arrowPos:It,ready:Xr,offsetX:kt,offsetY:ur,offsetR:et,offsetB:xt,onAlign:Oe,stretch:ne,targetWidth:$t/lr,targetHeight:At/nt})))});return r}const Ya=za(Wn);export{Rn as F,Za as N,dn as R,Ya as T,Qa as V,Ja as a,Oi as b,xa as i,ht as t,Ka as u};
