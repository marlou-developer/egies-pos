import{u as w,b as y,r as h,j as e,d as p}from"./app-DywnI1YH.js";import N from"./products-section-YMQz8VqH.js";import F from"./print-receipt-section-CwerpT5C.js";import"./index-DARd96Kn.js";import"./product-component-CsabVJz5.js";import"./button-2V5Ipmco.js";import"./input-CKA8O8kH.js";import"./modal-BoFmcI4K.js";import"./dialog-DIU6ctil.js";import"./portal-kcjGM0yo.js";import"./transition-DU6Gizr1.js";import"./index-B0aUfuwc.js";import"./XMarkIcon-ChL42USk.js";import"./cart-thunk-BjG3MC86.js";import"./cart-service-BnAT86Gg.js";import"./category-thunk-6yb4zBO9.js";import"./customer-thunk-Big96S04.js";import"./index-dNtg25yY.js";import"./sweetalert2.esm.all-DV3w3JmD.js";import"./BanknotesIcon-NYAjwl_j.js";function M(){const{carts:i}=w(s=>s.products),c=y(),[a,x]=h.useState(null),[r,f]=h.useState("Store"),j=s=>{const t=i.map(l=>l.id===s.id?{...l,pcs:l.pcs+1}:l);c(p(t))};console.log("sdfdadwad",i);const b=s=>{const t=i.map(l=>l.id===s.id?{...l,pcs:l.pcs-1}:l).filter(l=>l.pcs>0);c(p(t))};function g(s,t){const l=i.map(o=>o.id===s.id?{...o,sub_price:s[t],type_item_discount:t}:o);c(p(l))}const v=(s,t)=>{const l=i.map(o=>o.id===s.id?{...o,discount:parseFloat(t)||0}:o);c(p(l))},u=i.reduce((s,t)=>s+parseFloat(t.sub_price)*parseInt(t.pcs),0),n=i.reduce((s,t)=>s+(parseFloat(t.discount)||0),0),d=n+parseFloat(a||0),m=i.reduce((s,t)=>s+(parseFloat(t.sub_price)*parseInt(t.pcs)-(parseFloat(t.discount)||0)),0)-parseFloat(a||0);return e.jsx("div",{className:"mx-auto max-w-3xl lg:max-w-7xl xl:max-w-8xl",children:e.jsxs("div",{className:"grid grid-cols-1 items-start gap-4 lg:grid-cols-10 lg:gap-8",children:[e.jsx("div",{className:"grid grid-cols-1 gap-4 lg:col-span-6",children:e.jsx("section",{"aria-labelledby":"section-1-title",children:e.jsx("div",{className:"overflow-hidden rounded-lg bg-white shadow-sm",children:e.jsx("div",{children:e.jsx(N,{storeName:r})})})})}),e.jsx("div",{className:"grid grid-cols-1 lg:col-span-4 gap-4",children:e.jsxs("section",{className:"flex flex-col items-center justify-between mt-6 w-full xl:h-[82vh] xxl:h-[87vh]","aria-labelledby":"section-2-title",children:[e.jsxs("div",{className:"overflow-hidden rounded-lg bg-white shadow-sm  w-full ",children:[e.jsx("div",{className:"px-5 flex w-full gap-3",children:e.jsx("div",{className:"w-full",children:e.jsxs("select",{value:r,onChange:s=>f(s.target.value),className:"w-full rounded-md",name:"",children:[e.jsx("option",{value:"Store",children:"Store"}),e.jsx("option",{value:"Shopee",children:"Shopee"})]})})}),e.jsx("div",{class:"flex flex-row items-center justify-between px-5 mt-5",children:e.jsx("div",{class:"font-bold text-xl",children:"Current Order"})}),e.jsx("div",{class:"px-5 py-4 overflow-y-auto h-64",children:i.map(s=>{var t;return e.jsxs("div",{class:"flex flex-row gap-3 border-pink-300 border  p-2 rounded-lg shadow-md justify-between items-center mb-4",children:[e.jsxs("div",{class:"flex flex-1 flex-col gap-3 items-start  justify-between w-2/5",children:[e.jsxs("div",{className:"flex text-center w-full gap-3",children:[e.jsx("img",{src:(t=s==null?void 0:s.uploads[0])==null?void 0:t.file,class:"w-10 h-10 object-cover rounded-md",alt:""}),e.jsx("span",{class:"font-semibold text-sm",children:s==null?void 0:s.name})]}),e.jsxs("div",{className:"font-bold",children:["₱"," ",parseFloat(s.sub_price).toLocaleString("en-PH",{minimumFractionDigits:2})]})]}),e.jsxs("div",{class:"flex-1 flex flex-col gap-3 justify-between",children:[e.jsxs("div",{className:"flex w-full",children:[e.jsx("button",{onClick:()=>b(s),class:"px-3 py-1 rounded-md bg-gray-300 ",children:"-"}),e.jsx("span",{class:"font-semibold mx-1",children:e.jsx("input",{id:"pcs",name:"pcs",type:"text",value:s==null?void 0:s.pcs,className:"block text-center w-full rounded-md bg-white py-1.5 text-base text-gray-900 placeholder:text-gray-400 focus:ring-pink-300 focus:border-pink-300 sm:text-sm"})}),e.jsx("button",{onClick:()=>j(s),class:"px-3 py-1 rounded-md bg-gray-300 ",children:"+"})]}),e.jsx("span",{class:" font-semibold text-sm",children:e.jsxs("select",{onChange:l=>g(s,l.target.value),id:"pricing",name:"pricing",autoComplete:"pricing",className:"col-start-1 row-start-1 w-full appearance-none rounded-md bg-white py-1 pl-3 pr-1 text-base text-gray-900 outline-none focus:ring-pink-300 focus:border-pink-300 sm:text-sm/6",children:[r!="Store"&&e.jsx("option",{value:"shopee",selected:!0,children:"Shopee Price"}),r=="Store"&&e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"srp",selected:!0,children:"SRP Price"}),e.jsx("option",{value:"reseller",children:"Reseller Price"}),e.jsx("option",{value:"city_distributor",children:"City Distributor Price"}),e.jsx("option",{value:"district_distributor",children:"District Distributor Price"}),e.jsx("option",{value:"provincial_distributor",children:"Provincial Distributor Price"})]})]})})]}),e.jsxs("div",{class:"font-semibold text-xl flex-1  flex flex-col gap-3  text-left",children:[e.jsxs("div",{className:"flex-1",children:["₱",parseFloat(Number(s.sub_price)*Number(s.pcs??"1")-Number(s.discount??"0")).toFixed(2)]}),e.jsx("div",{className:"flex-1",children:e.jsx("input",{placeholder:"Discount",type:"number",value:s.discount||"",onChange:l=>v(s,l.target.value),className:"col-start-1 row-start-1 w-full appearance-none rounded-md bg-white py-1 pl-3 pr-1 text-base text-gray-900 outline-none focus:ring-pink-300 focus:border-pink-300 sm:text-sm/6"})})]})]})})}),e.jsx("div",{class:"px-5 mt-5",children:e.jsxs("div",{class:"rounded-md shadow-lg",children:[e.jsx("div",{className:"px-4 mb-4",children:e.jsx("input",{placeholder:"Overall Product Discount",type:"number",value:a,onChange:s=>x(s.target.value==""?0:s.target.value),className:"col-start-1 row-start-1 w-full appearance-none rounded-md bg-white py-1 pl-3 pr-1 text-base text-gray-900 outline-none focus:ring-pink-300 focus:border-pink-300 sm:text-sm/6"})}),e.jsxs("div",{class:" px-4 flex justify-between ",children:[e.jsx("span",{class:"font-semibold text-sm",children:"Subtotal"}),e.jsxs("span",{class:"font-bold",children:["₱",u.toFixed(2)]})]}),e.jsxs("div",{class:" px-4 flex justify-between ",children:[e.jsx("span",{class:"font-semibold text-sm",children:"Discount Per Item"}),e.jsxs("span",{class:"font-bold",children:["₱",n==null?void 0:n.toFixed(2)]})]}),e.jsxs("div",{class:" px-4 flex justify-between ",children:[e.jsx("span",{class:"font-semibold text-sm",children:"Discount Per Order"}),e.jsxs("span",{class:"font-bold",children:["₱",isNaN(parseFloat(a))?"0.00":parseFloat(a).toFixed(2)]})]}),e.jsxs("div",{class:" px-4 flex justify-between ",children:[e.jsx("span",{class:"font-semibold text-sm",children:"Total Discount"}),e.jsxs("span",{class:"font-bold",children:["₱",d==null?void 0:d.toFixed(2)]})]}),e.jsxs("div",{class:"border-t-2 mt-3 py-2 px-4 flex items-center justify-between",children:[e.jsx("span",{class:"font-semibold text-2xl",children:"Total"}),e.jsxs("span",{class:"font-bold text-2xl",children:["₱",m.toFixed(2)]})]})]})})]}),e.jsx("div",{class:"px-5 mt-5 w-full",children:e.jsx(F,{shop:r,data:i,subtotal:u,totalItemDiscount:n,totalDiscount:d,total_price:m,setOverallDiscount:x,discount_per_order:isNaN(parseFloat(a))?"0":a})})]})})]})})}export{M as default};
