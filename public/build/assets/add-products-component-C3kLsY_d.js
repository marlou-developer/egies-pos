import{u as x,r as h,b as g,j as e,v as u,s as b}from"./app-DGcqdgdv.js";import{k as N,n as _,o as w}from"./index-7PF5j2Go.js";import C from"./upload-product-section-BjBhfDGv.js";import{b as k,g as P}from"./product-thunk-CAZfWABH.js";import{I as n}from"./input-BYdC6WM6.js";import{D as S}from"./drawer-section-DjYHc5NC.js";import{F}from"./XMarkIcon-Bme8OOUq.js";import{s as f}from"./index-Bi0PxdIv.js";import"./PhotoIcon-DWrD9OId.js";import"./transition-BVUoSTV8.js";import"./useZIndex-CD9LIQsA.js";import"./index-CoquYDBv.js";import"./index-B9MCMHvr.js";function W({open:v,setOpenProduct:r}){const{categories:l}=x(t=>t.categories),[o,c]=h.useState(!1),[d,j]=h.useState(null),{product:s}=x(t=>t.products),m=g();console.log("categories",l);function a(t,i){m(typeof t=="string"?u({...s,[t]:i}):u({...s,[t.target.name]:t.target.value}))}async function y(t){t.preventDefault(),c(!0);const i=new FormData;i.append("product_id",s.id??""),i.append("file_name",s.file_name??""),i.append("name",s.name??""),i.append("category_id",s.category_id??""),i.append("quantity",s.quantity??""),i.append("status",s.status??""),i.append("cost",s.cost??""),i.append("srp",s.srp??""),i.append("shopee",s.shopee??""),i.append("reseller",s.reseller??""),i.append("brand",s.brand??""),i.append("delivery_receipt_no",s.delivery_receipt_no??""),i.append("city_distributor",s.city_distributor??""),i.append("district_distributor",s.district_distributor??""),i.append("provincial_distributor",s.provincial_distributor??""),d&&d.length>0&&Array.from(d).forEach(p=>{i.append("uploads[]",p)});try{await b.dispatch(k(i)),await b.dispatch(P()),f.success("Product successfully saved!"),r(!1)}catch{f.error("Failed to add Product. Please try again.")}finally{c(!1)}}return e.jsx(e.Fragment,{children:e.jsx(S,{open:v,setOpen:r,children:e.jsxs("form",{onSubmit:y,className:"flex h-full flex-col divide-y divide-gray-200 bg-white shadow-xl",children:[e.jsxs("div",{className:"h-0 flex-1 overflow-y-auto",children:[e.jsxs("div",{className:"bg-pink-200 px-4 py-6 sm:px-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-base font-semibold text-pink-600",children:[e.jsx(N,{className:"float-left mr-1 mt-1"}),"New Product"]}),e.jsx("div",{className:"ml-3 flex h-7 items-center",children:e.jsxs("button",{type:"button",onClick:()=>r(!1),className:"relative rounded-md bg-pink-200 text-gray-400 hover:text-gray-600 focus:ring-2 focus:ring-white focus:outline-hidden",children:[e.jsx("span",{className:"absolute -inset-2.5"}),e.jsx("span",{className:"sr-only",children:"Close panel"}),e.jsx(F,{"aria-hidden":"true",className:"size-6"})]})})]}),e.jsx("div",{className:"mt-1",children:e.jsx("p",{className:"text-sm text-gray-600",children:"Get started by filling in the information below to create your new product."})})]}),e.jsx("div",{className:"flex flex-1 flex-col justify-between",children:e.jsx("div",{className:"divide-y divide-gray-200 px-4 sm:px-6",children:e.jsxs("div",{className:"space-y-6 pt-6 pb-5",children:[e.jsxs("div",{className:"sm:col-span-12",children:[e.jsx(_,{className:"float-left size-5 mr-1 mt-3 text-pink-500"}),e.jsx("h3",{className:"text-base font-medium text-gray-600 pt-3",children:"Product Information"}),e.jsx("hr",{})]}),e.jsx("div",{children:e.jsx(n,{onChange:a,value:(s==null?void 0:s.delivery_receipt_no)??"",name:"delivery_receipt_no",label:"Delivery Receipt #",type:"text"})}),e.jsx("div",{children:e.jsx(n,{onChange:a,value:(s==null?void 0:s.brand)??"",name:"brand",label:"Brand",type:"text"})}),e.jsx("div",{children:e.jsx(n,{onChange:a,value:(s==null?void 0:s.name)??"",name:"name",label:"Product Name",type:"text"})}),e.jsx("div",{children:e.jsx("div",{className:"mt-2",children:e.jsxs("select",{onChange:a,value:(s==null?void 0:s.category_id)??"",name:"category_id",type:"text",className:"block w-full rounded-md bg-white px-3 py-2.5 text-base text-gray-900 placeholder:text-gray-400 focus:ring-pink-300 focus:border-pink-300 sm:text-sm/6",children:[e.jsx("option",{value:"",children:"Select a category"}),l==null?void 0:l.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})})}),e.jsx("div",{children:e.jsx(n,{onChange:a,value:(s==null?void 0:s.quantity)??"",name:"quantity",label:"Quantity",type:"number"})}),e.jsxs("div",{className:"sm:col-span-12",children:[e.jsx("hr",{}),e.jsx("h3",{className:"text-base font-medium text-white pt-3",children:"Upload Room Images"}),e.jsx("div",{className:"mt-2 flex justify-center rounded-lg border border-dashed border-pink-300 px-6 py-10",children:e.jsx("div",{className:"text-center",children:e.jsx(C,{files:d,setFiles:j})})})]}),e.jsxs("div",{className:"sm:col-span-12",children:[e.jsx(w,{className:"float-left size-5 mr-1 mt-3 text-pink-500"}),e.jsx("h3",{className:"text-base font-medium text-gray-600 pt-3",children:"Pricing Information"}),e.jsx("hr",{})]}),e.jsx("div",{children:e.jsx(n,{onChange:a,value:(s==null?void 0:s.cost)??"",name:"cost",label:"Cost Per Unit",type:"number"})}),e.jsx("div",{children:e.jsx(n,{onChange:a,value:(s==null?void 0:s.srp)??"",name:"srp",label:"SRP Price",type:"number"})}),e.jsx("div",{children:e.jsx(n,{onChange:a,value:(s==null?void 0:s.shopee)??"",name:"shopee",label:"Shopee Price (optional)",type:"number"})}),e.jsx("div",{children:e.jsx(n,{onChange:a,value:(s==null?void 0:s.reseller)??"",name:"reseller",label:"Reseller Price",type:"number"})}),e.jsx("div",{children:e.jsx(n,{onChange:a,value:(s==null?void 0:s.city_distributor)??"",name:"city_distributor",label:"Distributor Price",type:"number"})}),e.jsx("div",{children:e.jsx(n,{onChange:a,value:(s==null?void 0:s.district_distributor)??"",name:"district_distributor",label:"District Distributor Price",type:"number"})}),e.jsx("div",{children:e.jsx(n,{onChange:a,value:(s==null?void 0:s.provincial_distributor)??"",name:"provincial_distributor",label:"Provincial Distributor Price",type:"number"})})]})})})]}),e.jsxs("div",{className:"flex shrink-0 justify-end px-4 py-4",children:[e.jsx("button",{type:"button",onClick:()=>r(!1),className:"rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-xs ring-1 ring-gray-300 ring-inset hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:o,className:"ml-4 inline-flex justify-center rounded-md bg-pink-500 px-3 py-2 text-sm font-semibold text-white shadow-xs hover:bg-pink-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-pink-600",children:o?"Saving...":"Save"})]})]})})})}export{W as default};
