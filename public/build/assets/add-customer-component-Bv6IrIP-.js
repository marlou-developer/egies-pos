import{r as p,u as y,b,j as e,c as x,s as h}from"./app-NpKQ55uy.js";import{e as j,f as g}from"./index-DJAIrCty.js";import{D as N}from"./drawer-section-D1fQaQ1i.js";import{I as n}from"./input-DEwyN3PW.js";import{c as C,g as w}from"./customer-thunk-XxL2_Bki.js";import{F as k}from"./XMarkIcon-sizhzrAI.js";import{s as f}from"./index-B5YhcsdO.js";import"./transition-B6H0kzGq.js";import"./useZIndex-CbxCwRF3.js";import"./index-_ZY5ey_u.js";import"./index-B67aJnqZ.js";function B({open:u,setOpenCustomer:l}){const[o,d]=p.useState(!1),[r,_]=p.useState(null),{customer:a}=y(i=>i.customers),m=b();function t(i,s){m(typeof i=="string"?x({...a,[i]:s}):x({...a,[i.target.name]:i.target.value}))}async function v(i){i.preventDefault(),d(!0);const s=new FormData;s.append("customer_id",a.id??""),s.append("file_name",a.file_name??""),s.append("name",a.name??""),s.append("street",a.street??""),s.append("brgy",a.brgy??""),s.append("city",a.city??""),s.append("province",a.province??""),s.append("postal",a.postal??""),s.append("mobile_no",a.mobile_no??""),s.append("email",a.email??""),r&&r.length>0&&Array.from(r).forEach(c=>{s.append("uploads[]",c)});try{await h.dispatch(C(s)),await h.dispatch(w()),f.success("Customer successfully saved!"),l(!1)}catch{f.error("Failed to add Customer. Please try again.")}finally{d(!1)}}return e.jsx(e.Fragment,{children:e.jsx(N,{open:u,setOpen:l,children:e.jsxs("form",{onSubmit:v,className:"flex h-full flex-col divide-y divide-gray-200 bg-white shadow-xl",children:[e.jsxs("div",{className:"h-0 flex-1 overflow-y-auto",children:[e.jsxs("div",{className:"bg-pink-200 px-4 py-6 sm:px-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-base font-semibold text-pink-600",children:[e.jsx(j,{className:"float-left mr-1 mt-1"}),"New Customer"]}),e.jsx("div",{className:"ml-3 flex h-7 items-center",children:e.jsxs("button",{type:"button",onClick:()=>l(!1),className:"relative rounded-md bg-pink-200 text-gray-400 hover:text-gray-600 focus:ring-2 focus:ring-white focus:outline-hidden",children:[e.jsx("span",{className:"absolute -inset-2.5"}),e.jsx("span",{className:"sr-only",children:"Close panel"}),e.jsx(k,{"aria-hidden":"true",className:"size-6"})]})})]}),e.jsx("div",{className:"mt-1",children:e.jsx("p",{className:"text-sm text-gray-600",children:"Get started by filling in the information below to create your new Customer."})})]}),e.jsx("div",{className:"flex flex-1 flex-col justify-between",children:e.jsx("div",{className:"divide-y divide-gray-200 px-4 sm:px-6",children:e.jsxs("div",{className:"space-y-6 pt-6 pb-5",children:[e.jsxs("div",{className:"sm:col-span-12",children:[e.jsx(g,{className:"float-left size-5 mr-1 mt-3 text-pink-500"}),e.jsx("h3",{className:"text-base font-medium text-gray-600 pt-3",children:"Customer Information"}),e.jsx("hr",{})]}),e.jsx("div",{children:e.jsx(n,{onChange:t,value:(a==null?void 0:a.name)??"",name:"name",label:"Customer Name",type:"text"})}),e.jsx("div",{children:e.jsx(n,{onChange:t,value:(a==null?void 0:a.street)??"",name:"street",label:" Street Address",type:"text"})}),e.jsx("div",{children:e.jsx(n,{onChange:t,value:(a==null?void 0:a.brgy)??"",name:"brgy",label:"Barangay",type:"text"})}),e.jsx("div",{children:e.jsx(n,{onChange:t,value:(a==null?void 0:a.city)??"",name:"city",label:"City",type:"text"})}),e.jsx("div",{children:e.jsx(n,{onChange:t,value:(a==null?void 0:a.province)??"",name:"province",label:"Province",type:"text"})}),e.jsx("div",{children:e.jsx(n,{onChange:t,value:(a==null?void 0:a.postal)??"",name:"postal",label:"Postal Code",type:"text"})}),e.jsx("div",{children:e.jsx(n,{onChange:t,value:(a==null?void 0:a.mobile_no)??"",name:"mobile_no",label:"Mobile No.",type:"text"})}),e.jsx("div",{children:e.jsx(n,{onChange:t,value:(a==null?void 0:a.email)??"",name:"email",label:"Email Address",type:"email"})})]})})})]}),e.jsxs("div",{className:"flex shrink-0 justify-end px-4 py-4",children:[e.jsx("button",{type:"button",onClick:()=>l(!1),className:"rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-xs ring-1 ring-gray-300 ring-inset hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:o,className:"ml-4 inline-flex justify-center rounded-md bg-pink-500 px-3 py-2 text-sm font-semibold text-white shadow-xs hover:bg-pink-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-pink-600",children:o?"Saving...":"Save"})]})]})})})}export{B as default};
