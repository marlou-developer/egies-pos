import{r as p,u as g,b as v,j as e,E as x,s as f,c as b}from"./app-mp6KMm9c.js";import{w as y,x as N}from"./index-BAo0uvOy.js";import{D as w}from"./drawer-section-B73rjaht.js";import{I as i}from"./input-nmHjJkZ1.js";import{c as _,g as k}from"./supplier-thunk-CFFSOPdH.js";import{F as C}from"./XMarkIcon-D_-Y4jrT.js";import{s as h}from"./index-B-XSnsKi.js";import"./transition-BF4PF6hm.js";import"./useZIndex-DN0M07Ok.js";import"./index-oiTME6KI.js";import"./index-CkVo64pp.js";import"./UnstableContext-CnFNeDr3.js";import"./KeyCode-C40MO73N.js";function q({open:u,setOpenSupplier:l}){const[d,c]=p.useState(!1),[o,S]=p.useState(null),{supplier:s}=g(t=>t.suppliers),r=v();function n(t,a){r(typeof t=="string"?x({...s,[t]:a}):x({...s,[t.target.name]:t.target.value}))}async function j(t){t.preventDefault(),c(!0);const a=new FormData;a.append("file_name",s.file_name??""),a.append("name",s.name??""),a.append("address",s.address??""),a.append("contact_person",s.contact_person??""),a.append("contact_no",s.contact_no??""),a.append("email",s.email??""),o&&o.length>0&&Array.from(o).forEach(m=>{a.append("uploads[]",m)});try{await f.dispatch(_(a)),await f.dispatch(k()),h.success("Supplier successfully saved!"),l(!1),r(b({}))}catch{h.error("Failed to add Supplier. Please try again.")}finally{c(!1)}}return e.jsx(e.Fragment,{children:e.jsx(w,{open:u,setOpen:l,children:e.jsxs("form",{onSubmit:j,className:"flex h-full flex-col divide-y divide-gray-200 bg-white shadow-xl",children:[e.jsxs("div",{className:"h-0 flex-1 overflow-y-auto",children:[e.jsxs("div",{className:"bg-pink-200 px-4 py-6 sm:px-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-base font-semibold text-pink-600",children:[e.jsx(y,{className:"float-left mr-1 mt-1"}),"New Supplier"]}),e.jsx("div",{className:"ml-3 flex h-7 items-center",children:e.jsxs("button",{type:"button",onClick:()=>l(!1),className:"relative rounded-md bg-pink-200 text-gray-400 hover:text-gray-600 focus:ring-2 focus:ring-white focus:outline-hidden",children:[e.jsx("span",{className:"absolute -inset-2.5"}),e.jsx("span",{className:"sr-only",children:"Close panel"}),e.jsx(C,{"aria-hidden":"true",className:"size-6"})]})})]}),e.jsx("div",{className:"mt-1",children:e.jsx("p",{className:"text-sm text-gray-600",children:"Get started by filling in the information below to create your new Supplier."})})]}),e.jsx("div",{className:"flex flex-1 flex-col justify-between",children:e.jsx("div",{className:"divide-y divide-gray-200 px-4 sm:px-6",children:e.jsxs("div",{className:"space-y-6 pt-6 pb-5",children:[e.jsxs("div",{className:"sm:col-span-12",children:[e.jsx(N,{className:"float-left size-5 mr-1 mt-3 text-pink-500"}),e.jsx("h3",{className:"text-base font-medium text-gray-600 pt-3",children:"Supplier Information"}),e.jsx("hr",{})]}),e.jsx("div",{children:e.jsx(i,{onChange:n,value:(s==null?void 0:s.name)??"",name:"name",label:"Supplier Name",type:"text"})}),e.jsx("div",{children:e.jsx(i,{onChange:n,value:(s==null?void 0:s.address)??"",name:"address",label:"Address",type:"text"})}),e.jsx("div",{children:e.jsx(i,{onChange:n,value:(s==null?void 0:s.contact_person)??"",name:"contact_person",label:"Contact Person",type:"text"})}),e.jsx("div",{children:e.jsx(i,{onChange:n,value:(s==null?void 0:s.contact_no)??"",name:"contact_no",label:"Contact No.",type:"number"})}),e.jsx("div",{children:e.jsx(i,{onChange:n,value:(s==null?void 0:s.email)??"",name:"email",label:"Email Address",type:"email"})})]})})})]}),e.jsxs("div",{className:"flex shrink-0 justify-end px-4 py-4",children:[e.jsx("button",{type:"button",onClick:()=>l(!1),className:"rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-xs ring-1 ring-gray-300 ring-inset hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:d,className:"ml-4 inline-flex justify-center rounded-md bg-pink-500 px-3 py-2 text-sm font-semibold text-white shadow-xs hover:bg-pink-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-pink-600",children:d?"Saving...":"Save"})]})]})})})}export{q as default};
