import{u as y,a as N,r as m,j as e,b as a}from"./app-_4OLlqC-.js";import F from"./products-section-C1vbAi8E.js";import _ from"./pay-section-CXiXMAY1.js";import"./index-CG9rKuyd.js";import"./moment-C5S46NFB.js";import{F as S}from"./XMarkIcon-BggDpysJ.js";import"./product-component-8l9GU0wP.js";import"./button-DK1Sm4G6.js";import"./modal-BJMib0bp.js";import"./transition-B-Uxs1wG.js";import"./dialog-CrCrS23k.js";import"./portal-SwuPV3Pq.js";import"./index-BIfExDrV.js";import"./cart-thunk-BvjJbdMb.js";import"./cart-service-BwtDTly3.js";import"./category-thunk-D3U6PM3c.js";import"./server.browser-CpNk_Rrq.js";import"./sweetalert2.esm.all-DV3w3JmD.js";import"./print-receipt-section-BFmWlG5S.js";import"./peso-BbTyboS3.js";function Q({setIsModalOpen:f}){const{carts:r}=y(s=>s.products),n=N(),[o,h]=m.useState(null),[d,k]=m.useState("Store"),b=s=>{const l=r.map(t=>t.id===s.id?t.quantity>=t.pcs+1?{...t,pcs:t.pcs+1}:(alert("Insufficient Supply"),t):t);n(a(l))};console.log("sdfdadwad",r);const j=s=>{const l=r.map(t=>t.id===s.id?{...t,pcs:t.pcs-1}:t).filter(t=>t.pcs>0);n(a(l))};function g(s,l){const t=r.map(i=>i.id===s.id?{...i,sub_price:s[l],type_item_discount:l}:i);n(a(t))}function v(s,l){const t=r.map(i=>i.id===s.id?i.quantity>=Number(l)?{...i,pcs:Number(l)}:(alert("Insufficient Supply"),i):i);n(a(t))}const w=(s,l)=>{const t=r.map(i=>i.id===s.id?{...i,discount:parseFloat(l)||0}:i);n(a(t))},x=r.reduce((s,l)=>s+parseFloat(l.sub_price)*parseInt(l.pcs),0),c=r.reduce((s,l)=>s+(parseFloat(l.discount)||0),0),p=c+parseFloat(o||0),u=r.reduce((s,l)=>s+(parseFloat(l.sub_price)*parseInt(l.pcs)-(parseFloat(l.discount)||0)),0)-parseFloat(o||0);return e.jsx("div",{className:"mx-auto max-w-3xl lg:max-w-7xl xl:max-w-8xl",children:e.jsxs("div",{className:"grid grid-cols-1 items-start gap-4 lg:grid-cols-10 lg:gap-8",children:[e.jsx("div",{className:"grid grid-cols-1 gap-4 lg:col-span-6",children:e.jsx("section",{"aria-labelledby":"section-1-title",children:e.jsx("div",{className:"overflow-hidden rounded-lg bg-white shadow-sm",children:e.jsx("div",{children:e.jsx(F,{storeName:d})})})})}),e.jsx("div",{className:"grid grid-cols-1 lg:col-span-4 gap-4",children:e.jsxs("section",{className:"flex flex-col items-center justify-between mt-6 w-full xl:h-[82vh] xxl:h-[87vh]","aria-labelledby":"section-2-title",children:[e.jsxs("div",{className:"overflow-hidden rounded-lg bg-white shadow-sm  w-full ",children:[e.jsxs("div",{class:"flex flex-row items-center justify-between px-5 mt-5",children:[e.jsx("div",{class:"font-bold text-xl",children:"Additional Order"}),e.jsxs("div",{className:"flex gap-3 ",children:[e.jsxs("div",{class:"font-bold text-3xl text-red-500",children:["(",r.length,")"]}),e.jsx("button",{onClick:()=>n(a([])),className:"bg-red-500 hover:bg-red-600 p-1.5 rounded-md text-white",children:"Clear All"})]})]}),e.jsx("div",{class:"px-5 py-4 overflow-y-auto h-64",children:r.map(s=>{var l;return console.log("resres",s),e.jsx(e.Fragment,{children:e.jsxs("div",{class:"flex flex-row gap-3 bg-pink-100 border-pink-300 border  p-2 rounded-lg shadow-md justify-between items-center mb-4",children:[e.jsxs("div",{class:"flex flex-1 flex-col gap-3 items-start  justify-between w-2/5",children:[e.jsxs("div",{className:"flex text-center w-full gap-3",children:[e.jsx("img",{src:(l=s==null?void 0:s.uploads[0])==null?void 0:l.file,class:"w-10 h-10 object-cover rounded-md",alt:""}),e.jsx("span",{class:"font-semibold text-sm",children:s==null?void 0:s.name})]}),e.jsxs("div",{className:"font-bold",children:["₱"," ",parseFloat(s.sub_price).toLocaleString("en-PH",{minimumFractionDigits:2})]})]}),e.jsxs("div",{class:"flex-1 flex flex-col gap-3 justify-between",children:[e.jsxs("div",{className:"flex w-full",children:[e.jsx("button",{onClick:()=>j(s),class:"px-3 py-1 rounded-md bg-gray-300 ",children:"-"}),e.jsx("span",{class:"font-semibold mx-1",children:e.jsx("input",{id:"pcs",name:"pcs",type:"number",onChange:t=>v(s,Number(t.target.value)),value:s==null?void 0:s.pcs,className:"block text-center w-full rounded-md bg-white py-1.5 text-base text-gray-900 placeholder:text-gray-400 focus:ring-pink-300 focus:border-pink-300 sm:text-sm"})}),e.jsx("button",{onClick:()=>b(s),class:"px-3 py-1 rounded-md bg-gray-300 ",children:"+"})]}),e.jsx("span",{class:" font-semibold text-sm",children:e.jsxs("select",{onChange:t=>g(s,t.target.value),id:"pricing",name:"pricing",autoComplete:"pricing",className:"col-start-1 row-start-1 w-full appearance-none rounded-md bg-white py-1 pl-3 pr-1 text-base text-gray-900 outline-none focus:ring-pink-300 focus:border-pink-300 sm:text-sm/6",children:[d!="Store"&&e.jsx("option",{value:"shopee",selected:!0,children:"Shopee Price"}),d=="Store"&&e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"srp",selected:!0,children:"SRP Price"}),s.reseller&&e.jsx("option",{value:"reseller",children:"Reseller Price"}),s.city_distributor&&e.jsx("option",{value:"city_distributor",children:"City Distributor Price"}),s.district_distributor&&e.jsx("option",{value:"district_distributor",children:"District Distributor Price"}),s.district_distributor&&e.jsx("option",{value:"district_distributor",children:"Provincial Distributor Price"})]})]})})]}),e.jsxs("div",{class:"font-semibold text-xl flex-1  flex flex-col gap-3  text-left",children:[e.jsxs("div",{className:"flex flex-1 justify-between",children:[e.jsxs("div",{className:"flex items-center justify-center",children:["₱",parseFloat(Number(s.sub_price)*Number(s.pcs??"1")-Number(s.discount??"0")).toFixed(2)]}),e.jsx("div",{className:"",children:e.jsx("button",{onClick:()=>{const t=r.filter(i=>i.id!==s.id);n(a(t))},className:" p-1 rounded-md hover:text-gray-700",children:e.jsx(S,{className:"h-5"})})})]}),e.jsx("div",{className:"flex-1",children:e.jsx("input",{placeholder:"Discount",type:"number",value:s.discount||"",onChange:t=>w(s,t.target.value),onWheel:t=>t.target.blur(),onKeyDown:t=>{(t.key==="ArrowUp"||t.key==="ArrowDown")&&t.preventDefault()},className:"col-start-1 row-start-1 w-full appearance-none rounded-md bg-white py-1 pl-3 pr-1 text-base text-gray-900 outline-none focus:ring-pink-300 focus:border-pink-300 sm:text-sm/6"})})]})]})})})}),e.jsx("div",{class:"px-5 mt-5",children:e.jsxs("div",{class:"rounded-md shadow-lg",children:[e.jsx("div",{className:"px-4 mb-4",children:e.jsx("input",{placeholder:"Overall Product Discount",type:"number",onChange:s=>h(s.target.value==""?0:s.target.value),className:"col-start-1 row-start-1 w-full appearance-none rounded-md bg-white py-1 pl-3 pr-1 text-base text-gray-900 outline-none focus:ring-pink-300 focus:border-pink-300 sm:text-sm/6"})}),e.jsxs("div",{class:" px-4 flex justify-between ",children:[e.jsx("span",{class:"font-semibold text-sm",children:"Subtotal"}),e.jsxs("span",{class:"font-bold",children:["₱",x.toFixed(2)]})]}),e.jsxs("div",{class:" px-4 flex justify-between ",children:[e.jsx("span",{class:"font-semibold text-sm",children:"Discount Per Item"}),e.jsxs("span",{class:"font-bold",children:["₱",c==null?void 0:c.toFixed(2)]})]}),e.jsxs("div",{class:" px-4 flex justify-between ",children:[e.jsx("span",{class:"font-semibold text-sm",children:"Discount Per Order"}),e.jsxs("span",{class:"font-bold",children:["₱",isNaN(parseFloat(o))?"0.00":parseFloat(o).toFixed(2)]})]}),e.jsxs("div",{class:" px-4 flex justify-between ",children:[e.jsx("span",{class:"font-semibold text-sm",children:"Total Discount"}),e.jsxs("span",{class:"font-bold",children:["₱",p==null?void 0:p.toFixed(2)]})]}),e.jsxs("div",{class:"border-t-2 mt-3 py-2 px-4 flex items-center justify-between",children:[e.jsx("span",{class:"font-semibold text-2xl",children:"Total"}),e.jsxs("span",{class:"font-bold text-2xl",children:["₱",u.toFixed(2)]})]})]})})]}),e.jsx("div",{class:"px-5 mt-5 w-full",children:e.jsx(_,{setIsModalOpen:f,shop:d,data:r,subtotal:x,totalItemDiscount:c,totalDiscount:p,total_price:u,discount_per_order:isNaN(parseFloat(o))?"0":o})})]})})]})})}export{Q as default};
