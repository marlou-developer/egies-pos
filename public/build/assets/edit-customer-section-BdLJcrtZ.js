import{u,r as o,j as e,s as x}from"./app-DaJzpRD1.js";import{I as l}from"./input-B_2Mo6NA.js";import{D as C}from"./drawer-section-BZRb4lKP.js";import{u as _,a as w}from"./customer-thunk-DlIYyxSt.js";import{o as k,k as S}from"./index-CECLn6BA.js";import{T as F}from"./index-DAZFxawv.js";import{F as E}from"./PencilSquareIcon-Dl9QNzwo.js";import{F as M}from"./XMarkIcon-Cu8aV9Sl.js";import{s as h}from"./index-CHB1YBTJ.js";import"./transition-CV9ECww1.js";import"./index-DDZz0QOp.js";import"./useZIndex-B1ojOm08.js";import"./index-Cq3yK6CD.js";import"./index-CKusoIRe.js";import"./asyncToGenerator-BOsjNV70.js";import"./useId-DdYFL-J6.js";import"./roundedArrow-kgEVhGh5.js";import"./motion-BLCci2GW.js";import"./zoom--wuIZfhl.js";import"./UnstableContext-DA8Y79IW.js";import"./useCSSVarCls-DdbGMcCA.js";import"./KeyCode-C40MO73N.js";function se({data:g,isOpen:y,setIsOpen:d}){const{customer:i}=u(s=>s.customers),{categories:D}=u(s=>s.categories),[c,P]=o.useState(null),[R,v]=o.useState(!1),b=()=>v(!0),[p,m]=o.useState(!1),[t,r]=o.useState({});o.useEffect(()=>{r(g)},[]);async function f(s){s.preventDefault(),m(!0);const a=new FormData;a.append("product_id",i.id??""),a.append("file_name",i.file_name??""),a.append("name",i.name??""),a.append("category_id",i.category_id??""),a.append("quantity",i.quantity??""),a.append("status",i.status??""),a.append("cost",i.cost??""),a.append("srp",i.srp??""),a.append("reseller",i.reseller??""),a.append("brand",i.brand??""),a.append("delivery_receipt_no",i.delivery_receipt_no??""),a.append("city_distributor",i.city_distributor??""),a.append("district_distributor",i.district_distributor??""),c&&c.length>0&&Array.from(c).forEach(n=>{a.append("uploads[]",n)});try{await x.dispatch(_(t));const n=new URLSearchParams(window.location.search),j=n.get("page")||1,N=n.get("search")||"";x.dispatch(w({page:j,search:N,per_page:10})),h.success("Updated Successfully!"),d(!1)}catch{h.error("Failed to update Customer. Please try again.")}finally{m(!1)}}return console.log("foaaaarmm",t),e.jsxs(e.Fragment,{children:[e.jsx(F,{title:"Edit Customer",children:e.jsxs("button",{className:"group flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-gray-900",onClick:b,children:[e.jsx(E,{className:"mr-3 size-5 text-gray-400"}),e.jsx("b",{children:"Edit Customer"})]})}),e.jsx("div",{}),e.jsx(C,{open:y,setOpen:d,children:e.jsxs("form",{onSubmit:f,className:"flex h-full flex-col divide-y divide-gray-200 bg-white shadow-xl",children:[e.jsxs("div",{className:"h-0 flex-1 overflow-y-auto",children:[e.jsxs("div",{className:"bg-pink-200 px-4 py-6 sm:px-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-base font-semibold text-pink-600",children:[e.jsx(k,{className:"float-left mr-1 mt-1"}),"Edit Customer"]}),e.jsx("div",{className:"ml-3 flex h-7 items-center",children:e.jsxs("button",{type:"button",onClick:()=>d(!1),className:"relative rounded-md bg-pink-200 text-gray-400 hover:text-gray-600 focus:ring-2 focus:ring-white focus:outline-hidden",children:[e.jsx("span",{className:"absolute -inset-2.5"}),e.jsx("span",{className:"sr-only",children:"Close panel"}),e.jsx(M,{"aria-hidden":"true",className:"size-6"})]})})]}),e.jsx("div",{className:"mt-1",children:e.jsx("p",{className:"text-sm text-gray-600",children:"Get started by updating the information below to modify customer."})})]}),e.jsx("div",{className:"flex flex-1 flex-col justify-between",children:e.jsx("div",{className:"divide-y divide-gray-200 px-4 sm:px-6",children:e.jsxs("div",{className:"space-y-6 pt-6 pb-5",children:[e.jsxs("div",{className:"sm:col-span-12",children:[e.jsx(S,{className:"float-left size-5 mr-1 mt-3 text-pink-500"}),e.jsx("h3",{className:"text-base font-medium text-gray-600 pt-3",children:"Customer Information"}),e.jsx("hr",{})]}),e.jsx("div",{children:e.jsx(l,{onChange:s=>r({...t,name:s.target.value}),value:t==null?void 0:t.name,name:"name",label:"Customer Name",type:"text"})}),e.jsx("div",{children:e.jsx(l,{onChange:s=>r({...t,street:s.target.value}),value:t==null?void 0:t.street,name:"street",label:"Street Address",type:"text"})}),e.jsx("div",{children:e.jsx(l,{onChange:s=>r({...t,brgy:s.target.value}),value:t==null?void 0:t.brgy,name:"brgy",label:"Barangay",type:"text"})}),e.jsx("div",{children:e.jsx(l,{onChange:s=>r({...t,city:s.target.value}),value:t==null?void 0:t.city,name:"city",label:"City",type:"text"})})," ",e.jsx("div",{children:e.jsx(l,{onChange:s=>r({...t,province:s.target.value}),value:t==null?void 0:t.province,name:"province",label:"Province",type:"text"})}),e.jsx("div",{children:e.jsx(l,{onChange:s=>r({...t,postal:s.target.value}),value:t==null?void 0:t.postal,name:"postal",label:"Postal Code",type:"text"})}),e.jsx("div",{children:e.jsx(l,{onChange:s=>r({...t,mobile_no:s.target.value}),value:t==null?void 0:t.mobile_no,name:"mobile_no",label:"Mobile No.",type:"text"})}),e.jsx("div",{children:e.jsx(l,{onChange:s=>r({...t,email:s.target.value}),value:t==null?void 0:t.email,name:"email",label:"Email Address",type:"email"})})]})})})]}),e.jsxs("div",{className:"flex shrink-0 justify-end px-4 py-4",children:[e.jsx("button",{type:"button",onClick:()=>d(!1),className:"rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-xs ring-1 ring-gray-300 ring-inset hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:p,className:"ml-4 inline-flex justify-center rounded-md bg-pink-500 px-3 py-2 text-sm font-semibold text-white shadow-xs hover:bg-pink-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-pink-600",children:p?"Saving...":"Save"})]})]})})]})}export{se as default};
