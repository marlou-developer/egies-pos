import{u,r as n,j as e,s as x}from"./app-8GgT6Ekg.js";import{I as r}from"./input-AX_6gtpV.js";import{D as j}from"./drawer-section-ClFNAPgx.js";import{u as N,g as C}from"./customer-thunk-BUK7LQr1.js";import{h as _,f as w}from"./index-B6qZK912.js";import{T as k}from"./index-C11uPm9S.js";import{F}from"./PencilSquareIcon-CTu3WiFt.js";import{F as S}from"./XMarkIcon-npbR1QlS.js";import{s as h}from"./index-yCCg5mSI.js";import"./transition-BJcaqv6Z.js";import"./index-BhxXqeiq.js";import"./useZIndex-DKvlObAz.js";import"./index-CZEOUPw6.js";import"./useId-Bvm2U5X5.js";function K({data:y,isOpen:g,setIsOpen:o}){const{customer:i}=u(s=>s.customers),{categories:E}=u(s=>s.categories),[d,M]=n.useState(null),[D,v]=n.useState(!1),f=()=>v(!0),[c,p]=n.useState(!1),[t,l]=n.useState({});n.useEffect(()=>{l(y)},[]);async function b(s){s.preventDefault(),p(!0);const a=new FormData;a.append("product_id",i.id??""),a.append("file_name",i.file_name??""),a.append("name",i.name??""),a.append("category_id",i.category_id??""),a.append("quantity",i.quantity??""),a.append("status",i.status??""),a.append("cost",i.cost??""),a.append("srp",i.srp??""),a.append("reseller",i.reseller??""),a.append("brand",i.brand??""),a.append("delivery_receipt_no",i.delivery_receipt_no??""),a.append("city_distributor",i.city_distributor??""),a.append("district_distributor",i.district_distributor??""),d&&d.length>0&&Array.from(d).forEach(m=>{a.append("uploads[]",m)});try{await x.dispatch(N(t)),x.dispatch(C()),h.success("Updated Successfully!"),o(!1)}catch{h.error("Failed to update Customer. Please try again.")}finally{p(!1)}}return console.log("foaaaarmm",t),e.jsxs(e.Fragment,{children:[e.jsx(k,{title:"Edit Customer",children:e.jsxs("button",{className:"group flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-gray-900",onClick:f,children:[e.jsx(F,{className:"mr-3 size-5 text-gray-400"}),e.jsx("b",{children:"Edit Customer"})]})}),e.jsx("div",{}),e.jsx(j,{open:g,setOpen:o,children:e.jsxs("form",{onSubmit:b,className:"flex h-full flex-col divide-y divide-gray-200 bg-white shadow-xl",children:[e.jsxs("div",{className:"h-0 flex-1 overflow-y-auto",children:[e.jsxs("div",{className:"bg-pink-200 px-4 py-6 sm:px-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-base font-semibold text-pink-600",children:[e.jsx(_,{className:"float-left mr-1 mt-1"}),"Edit Customer"]}),e.jsx("div",{className:"ml-3 flex h-7 items-center",children:e.jsxs("button",{type:"button",onClick:()=>o(!1),className:"relative rounded-md bg-pink-200 text-gray-400 hover:text-gray-600 focus:ring-2 focus:ring-white focus:outline-hidden",children:[e.jsx("span",{className:"absolute -inset-2.5"}),e.jsx("span",{className:"sr-only",children:"Close panel"}),e.jsx(S,{"aria-hidden":"true",className:"size-6"})]})})]}),e.jsx("div",{className:"mt-1",children:e.jsx("p",{className:"text-sm text-gray-600",children:"Get started by updating the information below to modify customer."})})]}),e.jsx("div",{className:"flex flex-1 flex-col justify-between",children:e.jsx("div",{className:"divide-y divide-gray-200 px-4 sm:px-6",children:e.jsxs("div",{className:"space-y-6 pt-6 pb-5",children:[e.jsxs("div",{className:"sm:col-span-12",children:[e.jsx(w,{className:"float-left size-5 mr-1 mt-3 text-pink-500"}),e.jsx("h3",{className:"text-base font-medium text-gray-600 pt-3",children:"Customer Information"}),e.jsx("hr",{})]}),e.jsx("div",{children:e.jsx(r,{onChange:s=>l({...t,name:s.target.value}),value:t==null?void 0:t.name,name:"name",label:"Customer Name",type:"text"})}),e.jsx("div",{children:e.jsx(r,{onChange:s=>l({...t,street:s.target.value}),value:t==null?void 0:t.street,name:"street",label:"Street Address",type:"text"})}),e.jsx("div",{children:e.jsx(r,{onChange:s=>l({...t,brgy:s.target.value}),value:t==null?void 0:t.brgy,name:"brgy",label:"Barangay",type:"text"})}),e.jsx("div",{children:e.jsx(r,{onChange:s=>l({...t,city:s.target.value}),value:t==null?void 0:t.city,name:"city",label:"City",type:"text"})})," ",e.jsx("div",{children:e.jsx(r,{onChange:s=>l({...t,province:s.target.value}),value:t==null?void 0:t.province,name:"province",label:"Province",type:"text"})}),e.jsx("div",{children:e.jsx(r,{onChange:s=>l({...t,postal:s.target.value}),value:t==null?void 0:t.postal,name:"postal",label:"Postal Code",type:"text"})}),e.jsx("div",{children:e.jsx(r,{onChange:s=>l({...t,mobile_no:s.target.value}),value:t==null?void 0:t.mobile_no,name:"mobile_no",label:"Mobile No.",type:"text"})}),e.jsx("div",{children:e.jsx(r,{onChange:s=>l({...t,email:s.target.value}),value:t==null?void 0:t.email,name:"email",label:"Email Address",type:"email"})})]})})})]}),e.jsxs("div",{className:"flex shrink-0 justify-end px-4 py-4",children:[e.jsx("button",{type:"button",onClick:()=>o(!1),className:"rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-xs ring-1 ring-gray-300 ring-inset hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:c,className:"ml-4 inline-flex justify-center rounded-md bg-pink-500 px-3 py-2 text-sm font-semibold text-white shadow-xs hover:bg-pink-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-pink-600",children:c?"Saving...":"Save"})]})]})})]})}export{K as default};
