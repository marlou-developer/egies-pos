import{u as k,a as S,r as m,j as e,b as n}from"./app-_4OLlqC-.js";import F from"./products-section-DtAqCgZI.js";import C from"./pay-section-Cu2vUz-8.js";import"./index-CG9rKuyd.js";import"./moment-C5S46NFB.js";import{F as h}from"./XMarkIcon-BggDpysJ.js";import"./product-component-8l9GU0wP.js";import"./button-DK1Sm4G6.js";import"./input-CqEbDxdg.js";import"./modal-BJMib0bp.js";import"./transition-B-Uxs1wG.js";import"./dialog-CrCrS23k.js";import"./portal-SwuPV3Pq.js";import"./index-BIfExDrV.js";import"./cart-thunk-BvjJbdMb.js";import"./cart-service-BwtDTly3.js";import"./category-thunk-D3U6PM3c.js";import"./customer-thunk-DGwlsZQZ.js";import"./index-ByBl8xpT.js";import"./server.browser-CpNk_Rrq.js";import"./sweetalert2.esm.all-DV3w3JmD.js";import"./print-receipt-section-BXeI39xj.js";import"./peso-BbTyboS3.js";import"./BanknotesIcon-DF8VR0lm.js";import"./CreditCardIcon-kFTePMFw.js";function ee(){const{carts:r}=k(s=>s.products),a=S(),[c,f]=m.useState(null),[d,b]=m.useState("Store"),j=s=>{if(b(s),s==="Shopee"){const l=r.map(t=>({...t,sub_price:t.shopee||0,type_item_discount:"shopee"}));a(n(l))}else if(s==="Store"){const l=r.map(t=>({...t,sub_price:t.srp||0,type_item_discount:"srp"}));a(n(l))}},g=s=>{const l=r.map(t=>t.id===s.id?t.quantity>=t.pcs+1?{...t,pcs:t.pcs+1}:(alert("Insufficient Supply"),t):t);a(n(l))};console.log("sdfdadwad",r);const v=s=>{const l=r.map(t=>t.id===s.id?{...t,pcs:t.pcs-1}:t).filter(t=>t.pcs>0);a(n(l))};function N(s,l){const t=r.map(i=>i.id===s.id?{...i,sub_price:s[l],type_item_discount:l}:i);a(n(t))}function w(s,l){const t=r.map(i=>i.id===s.id?i.quantity>=Number(l)?{...i,pcs:Number(l)}:(alert("Insufficient Supply"),i):i);a(n(t))}function y(s,l){const t=r.map(i=>i.id===s.id?{...i,sub_price:Number(l)}:i);a(n(t))}const _=(s,l)=>{const t=r.map(i=>i.id===s.id?{...i,discount:parseFloat(l)||0}:i);a(n(t))},x=r.reduce((s,l)=>s+parseFloat(l.sub_price)*parseInt(l.pcs),0),o=r.reduce((s,l)=>s+(parseFloat(l.discount)||0),0),p=o+parseFloat(c||0),u=r.reduce((s,l)=>s+(parseFloat(l.sub_price)*parseInt(l.pcs)-(parseFloat(l.discount)||0)),0)-parseFloat(c||0);return e.jsx("div",{className:"mx-auto max-w-3xl lg:max-w-7xl xl:max-w-8xl",children:e.jsxs("div",{className:"grid grid-cols-1 items-start gap-4 lg:grid-cols-10 lg:gap-8",children:[e.jsx("div",{className:"grid grid-cols-1 gap-4 lg:col-span-6",children:e.jsx("section",{"aria-labelledby":"section-1-title",children:e.jsx("div",{className:"overflow-hidden rounded-lg bg-white shadow-sm",children:e.jsx("div",{children:e.jsx(F,{storeName:d})})})})}),e.jsx("div",{className:"grid grid-cols-1 lg:col-span-4 gap-4",children:e.jsxs("section",{className:"flex flex-col items-center justify-between  w-full xl:h-[80vh] xxl:h-[87vh]","aria-labelledby":"section-2-title",children:[e.jsxs("div",{className:"overflow-hidden rounded-lg bg-white shadow-sm  w-full ",children:[e.jsx("div",{className:"px-5 flex w-full gap-3",children:e.jsx("div",{className:"w-full",children:e.jsxs("select",{value:d,onChange:s=>j(s.target.value),className:"w-full rounded-md",name:"",children:[e.jsx("option",{value:"Store",children:"Store"}),e.jsx("option",{value:"Shopee",children:"Shopee"})]})})}),e.jsxs("div",{class:"flex flex-row items-center justify-between px-5 mt-5",children:[e.jsx("div",{class:"font-bold text-xl",children:"Current Order"}),e.jsxs("div",{className:"flex gap-3 ",children:[e.jsxs("div",{class:"font-bold text-3xl text-red-500",children:["(",r.length,")"]}),e.jsx("button",{onClick:()=>a(n([])),className:"bg-red-500 hover:bg-red-600 p-1.5 rounded-md text-white",children:"Clear All"})]})]}),e.jsx("div",{class:"px-5 py-4 overflow-y-auto h-64",children:r.map(s=>{var l;return console.log("resres",s),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-2 bg-pink-100 border-pink-300 border p-3 rounded-lg shadow-md mb-4 overflow-hidden",children:[e.jsxs("div",{className:"flex flex-col md:flex-1 gap-2 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:(l=s==null?void 0:s.uploads[0])==null?void 0:l.file,className:"w-10 h-10 object-cover rounded-md flex-shrink-0",alt:""}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("span",{className:"font-semibold text-xs md:text-sm block truncate",children:s==null?void 0:s.name})}),e.jsx("div",{className:"md:hidden flex-shrink-0",children:e.jsx("button",{onClick:()=>{const t=r.filter(i=>i.id!==s.id);a(n(t))},className:"p-1 rounded-md hover:text-gray-700",children:e.jsx(h,{className:"h-4 w-4"})})})]}),e.jsxs("div",{className:"font-bold text-xs md:text-sm",children:[d=="Shopee"&&e.jsx(e.Fragment,{children:e.jsx("input",{id:"sub_price",name:"sub_price",type:"number",onChange:t=>y(s,Number(t.target.value)),value:(s==null?void 0:s.sub_price)===0?"":s==null?void 0:s.sub_price,onWheel:t=>t.target.blur(),className:"block text-center w-full max-w-24 rounded-md bg-white py-1 px-2 text-xs text-gray-900 placeholder:text-gray-400 focus:ring-pink-300 focus:border-pink-300"})}),d=="Store"&&e.jsxs("span",{className:"block truncate",children:["₱"," ",parseFloat(s.sub_price).toLocaleString("en-PH",{minimumFractionDigits:2})]})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-1 gap-2 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx("button",{onClick:()=>v(s),className:"px-2 py-1 rounded-md bg-gray-300 flex-shrink-0 text-xs",children:"-"}),e.jsx("input",{id:"pcs",name:"pcs",type:"number",onChange:t=>w(s,Number(t.target.value)),value:s==null?void 0:s.pcs,className:"block text-center w-12 rounded-md bg-white py-1 text-xs text-gray-900 placeholder:text-gray-400 focus:ring-pink-300 focus:border-pink-300"}),e.jsx("button",{onClick:()=>g(s),className:"px-2 py-1 rounded-md bg-gray-300 flex-shrink-0 text-xs",children:"+"})]}),e.jsx("div",{className:"w-full",children:e.jsxs("select",{onChange:t=>N(s,t.target.value),id:"pricing",name:"pricing",autoComplete:"pricing",className:"w-full appearance-none rounded-md bg-white py-1 h-9 pl-2 pr-1 text-xs text-gray-900 outline-none focus:ring-pink-300 focus:border-pink-300 truncate",children:[d!="Store"&&e.jsx("option",{value:"shopee",selected:!0,children:"Shopee Price"}),d=="Store"&&e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"srp",selected:!0,children:"SRP Price"}),s.reseller&&e.jsx("option",{value:"reseller",children:"Reseller Price"}),s.city_distributor&&e.jsx("option",{value:"city_distributor",children:"City Distributor"}),s.district_distributor&&e.jsx("option",{value:"district_distributor",children:"District Distributor"}),s.district_distributor&&e.jsx("option",{value:"district_distributor",children:"Provincial Distributor"})]})]})})]}),e.jsxs("div",{className:"flex flex-col md:flex-1 gap-2 min-w-0",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"font-semibold text-sm md:text-base truncate",children:["₱",parseFloat(Number(s.sub_price)*Number(s.pcs??"1")-Number(s.discount??"0")).toFixed(2)]}),e.jsx("div",{className:"hidden md:block flex-shrink-0",children:e.jsx("button",{onClick:()=>{const t=r.filter(i=>i.id!==s.id);a(n(t))},className:"p-1 rounded-md hover:text-gray-700",children:e.jsx(h,{className:"h-4 w-4"})})})]}),e.jsx("div",{className:"w-full",children:e.jsx("input",{placeholder:"Discount",type:"number",value:s.discount||"",onChange:t=>_(s,t.target.value),onWheel:t=>t.target.blur(),className:"w-full appearance-none rounded-md bg-white py-1 pl-2 pr-1 h-9 text-xs text-gray-900 outline-none focus:ring-pink-300 focus:border-pink-300"})})]})]})})})}),e.jsx("div",{class:"px-5 mt-5 ",children:e.jsxs("div",{class:"rounded-md shadow-lg",children:[e.jsx("div",{className:"px-4 mb-4",children:e.jsx("input",{placeholder:"Overall Product Discount",type:"number",onChange:s=>f(s.target.value==""?0:s.target.value),className:"col-start-1 row-start-1 w-full appearance-none rounded-md bg-white py-1 pl-3 pr-1 text-base text-gray-900 outline-none focus:ring-pink-300 focus:border-pink-300 sm:text-sm/6"})}),e.jsxs("div",{class:" px-4 flex justify-between ",children:[e.jsx("span",{class:"font-semibold text-sm",children:"Subtotal"}),e.jsxs("span",{class:"font-bold",children:["₱",x.toFixed(2)]})]}),e.jsxs("div",{class:" px-4 flex justify-between ",children:[e.jsx("span",{class:"font-semibold text-sm",children:"Discount Per Item"}),e.jsxs("span",{class:"font-bold",children:["₱",o==null?void 0:o.toFixed(2)]})]}),e.jsxs("div",{class:" px-4 flex justify-between ",children:[e.jsx("span",{class:"font-semibold text-sm",children:"Discount Per Order"}),e.jsxs("span",{class:"font-bold",children:["₱",isNaN(parseFloat(c))?"0.00":parseFloat(c).toFixed(2)]})]}),e.jsxs("div",{class:" px-4 flex justify-between ",children:[e.jsx("span",{class:"font-semibold text-sm",children:"Total Discount"}),e.jsxs("span",{class:"font-bold",children:["₱",p==null?void 0:p.toFixed(2)]})]}),e.jsxs("div",{class:"border-t-2 mt-3 py-2 px-4 flex items-center justify-between",children:[e.jsx("span",{class:"font-semibold text-2xl",children:"Total"}),e.jsxs("span",{class:"font-bold text-2xl",children:["₱",u.toFixed(2)]})]})]})})]}),e.jsx("div",{class:"px-5 mt-5 w-full",children:e.jsx(C,{shop:d,data:r,subtotal:x,totalItemDiscount:o,totalDiscount:p,total_price:u,discount_per_order:isNaN(parseFloat(c))?"0":c})})]})})]})})}export{ee as default};
