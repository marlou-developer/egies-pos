import{r as o,u as g,j as e,s as a}from"./app-B2U0fCfV.js";import{y as v}from"./index-B3OGOESp.js";import{M as j}from"./Modal-DDL-tg_z.js";import{I as d}from"./input-teUdggYV.js";import{c as y}from"./stock-thunk-CmB438Rm.js";import{g as b}from"./product-thunk-MuuQs6S_.js";import{b as S}from"./cart-thunk-BhXOMb-N.js";import{T as k}from"./index-D8-c6dtx.js";import{s as x}from"./index-B7YrMxeH.js";import"./index-Df7V5QFc.js";import"./transition-BtgHfgyJ.js";import"./dialog-CNPeQSg8.js";import"./portal-CGIxO_ha.js";import"./index-DPiqQPlh.js";import"./XMarkIcon-BW9xR3fM.js";import"./cart-service-SUQwkzMJ.js";import"./useZIndex-Bvdp-HgU.js";import"./index-BG8N-Loc.js";import"./asyncToGenerator-BawB4_L5.js";import"./useId-8JhUa9ov.js";import"./roundedArrow-De3EfNLb.js";import"./motion-BLCci2GW.js";import"./zoom-9llciyxa.js";import"./UnstableContext-D9ZTIPpm.js";import"./useCSSVarCls-ChtH3YhZ.js";import"./KeyCode-C40MO73N.js";function X({data:r}){const[h,l]=o.useState(!1),[s,c]=o.useState("same"),[_,p]=o.useState(!1),[i,n]=o.useState({}),{suppliers:u}=g(t=>t.suppliers),f=async t=>{t.preventDefault(),p(!0);try{await a.dispatch(y({...i,product_id:String(r==null?void 0:r.id),price:s==="same"?r==null?void 0:r.cost:null,remaining:String(r==null?void 0:r.quantity)})),await a.dispatch(S()),await a.dispatch(b()),x.success("Successfully added!"),l(!1),n({}),c("same")}catch{x.error("Failed to add stock. Please try again.")}finally{p(!1)}};return console.log("suppliers",u),e.jsxs("div",{children:[e.jsx(k,{title:"Add Stock",children:e.jsx("button",{type:"button",onClick:()=>l(!0),className:"relative inline-flex items-center rounded-md bg-pink-400 w-full p-3 text-sm font-semibold text-gray-900 ring-1 ring-gray-300 ring-inset hover:bg-pink-600 ",children:e.jsx(v,{className:" text-pink-100"})})}),e.jsx(j,{open:h,setOpen:l,children:e.jsxs("form",{onSubmit:f,children:[e.jsxs("div",{className:"mt-6 flex flex-col gap-5",children:[e.jsx("h1",{className:"font-bold text-xl text-pink-500",children:"Add Stock(s)"}),e.jsx("div",{children:e.jsx(d,{onChange:t=>n({...i,date:t.target.value}),value:i.date||"",name:"date",label:"Delivery Date",type:"date",required:!0})}),e.jsx("div",{children:e.jsx(d,{onChange:t=>n({...i,delivery_id:t.target.value}),value:i.delivery_id||"",name:"delivery_id",label:"Delivery ID",type:"text",required:!0})}),e.jsx("div",{children:e.jsx(d,{onChange:t=>n({...i,quantity:t.target.value}),value:i.quantity||"",name:"quantity",label:"Quantity",type:"number",required:!0})}),e.jsx("div",{children:e.jsxs("select",{value:i==null?void 0:i.supplier_id,onChange:t=>n({...i,supplier_id:t.target.value}),className:"w-full rounded-md border-gray-500 text-sm h-11",children:[e.jsx("option",{disabled:!0,selected:!0,children:"Select Supplier"}),u.map((t,m)=>e.jsx("option",{value:t.id,children:t.name},m))]})}),e.jsx("div",{children:e.jsxs("select",{value:s,onChange:t=>c(t.target.value),className:"w-full rounded-md border-gray-500 text-sm h-11",children:[e.jsx("option",{disabled:!0,selected:!0,children:"Pricing"}),e.jsxs("option",{value:"same",children:["Same cost price = ₱",parseFloat(r==null?void 0:r.cost).toLocaleString("en-PH",{minimumFractionDigits:2})]}),e.jsx("option",{value:"different",children:"Different cost price"})]})}),s==="different"&&e.jsxs("p",{className:"text-sm text-gray-600",children:["If cost price is different from the current cost price, ",e.jsx("a",{href:"/administrator/products",className:"text-pink-500 underline",children:"Add Product"})," ","instead."]})]}),e.jsx("div",{className:"mt-3 w-full",children:e.jsx("div",{className:"flex items-center justify-end",children:e.jsx("button",{type:"submit",disabled:s==="different",className:`rounded-md p-2 text-white transition 
        ${s==="different"?"bg-gray-300 cursor-not-allowed":"bg-pink-400 hover:bg-pink-500"}
    `,children:"Add Stock"})})})]})})]})}export{X as default};
