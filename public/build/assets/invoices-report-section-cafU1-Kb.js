import{u as C,j as t}from"./app-C24FDxFf.js";import{P as _,D as N,a as I,S as R,V as n,T as e,F as A}from"./react-pdf.browser-Dx0W2mxD.js";import{p}from"./peso-BbTyboS3.js";import{h as P}from"./moment-C5S46NFB.js";A.register({family:"NotoSans",fonts:[{src:"/fonts/Noto_Sans/static/NotoSans-Regular.ttf",fontWeight:"normal"},{src:"/fonts/Noto_Sans/static/NotoSans-Bold.ttf",fontWeight:"bold"}]});const s=R.create({page:{fontFamily:"NotoSans",fontSize:10,padding:30},header:{marginBottom:20},companyInfo:{textAlign:"right"},title:{fontSize:18,fontWeight:"bold",marginBottom:10},infoRow:{flexDirection:"row",justifyContent:"space-between",marginBottom:2},tableHeader:{flexDirection:"row",backgroundColor:"#f0f0f0",borderBottom:1,padding:5,fontWeight:"bold"},tableRow:{flexDirection:"row",borderBottom:1,padding:5},col:{flex:1,paddingHorizontal:3},colSmall:{flex:.5,paddingHorizontal:3},summary:{marginTop:10,alignItems:"flex-end"}}),V=()=>{var m,u,g,S,w;const{reports:o}=C(l=>l.carts),j=new URLSearchParams(window.location.search),B=j.get("start"),D=j.get("end"),b=(m=o==null?void 0:o.data)==null?void 0:m.reduce((l,c)=>{var i;const y=(i=c.cart_items)==null?void 0:i.reduce((a,r)=>{if(r.fixed_price){const d=parseFloat(r.fixed_price),x=parseInt(r.quantity);return a+d*x}return a},0);return l+y},0);return console.log(" reports?.data",o==null?void 0:o.data),t.jsx(_,{style:{width:"100%",height:"100vh"},children:t.jsx(N,{children:t.jsxs(I,{orientation:"landscape",size:"A4",style:s.page,children:[t.jsxs(n,{style:s.header,children:[t.jsx(e,{style:s.title,children:"INVOICES"}),t.jsxs(n,{style:{width:"100%",flexDirection:"row",justifyContent:"space-between",marginBottom:10},children:[t.jsxs(n,{style:{flex:1},children:[t.jsxs(n,{style:{flexDirection:"row",marginBottom:2},children:[t.jsx(e,{style:{width:60},children:"Period:"}),t.jsxs(e,{children:[B," - ",D]})]}),t.jsxs(n,{style:{flexDirection:"row",marginBottom:2},children:[t.jsx(e,{style:{width:60},children:"Customer:"}),t.jsx(e,{children:((u=o==null?void 0:o.customer)==null?void 0:u.name)??"All"})]}),t.jsxs(n,{style:{flexDirection:"row",marginBottom:2},children:[t.jsx(e,{style:{width:60},children:"User:"}),t.jsx(e,{children:((g=o==null?void 0:o.user)==null?void 0:g.name)??"All"})]}),t.jsxs(n,{style:{flexDirection:"row",marginBottom:2},children:[t.jsx(e,{style:{width:60},children:"Product:"}),t.jsx(e,{children:((S=o==null?void 0:o.product)==null?void 0:S.name)??"All"})]})]}),t.jsxs(n,{style:{flex:1,textAlign:"left"},children:[t.jsxs(n,{style:{flexDirection:"row",justifyContent:"flex-start",marginBottom:2},children:[t.jsxs(e,{style:{width:60},children:["Company:  "," "]}),t.jsx(e,{children:"Egie's Beauty Boutique"})]}),t.jsxs(n,{style:{flexDirection:"row",justifyContent:"flex-start"},children:[t.jsxs(e,{style:{width:53},children:["Address: "," "]}),t.jsx(e,{children:"Rizal Street Brgy V, 6127 San Carlos City"})]})]})]})]}),t.jsxs(n,{style:s.tableHeader,children:[t.jsx(e,{style:s.colSmall,children:"#"}),t.jsx(e,{style:s.colSmall,children:"Date"}),t.jsx(e,{style:s.colSmall,children:"Documents #"}),t.jsx(e,{style:s.colSmall,children:"Customer"}),t.jsx(e,{style:s.colSmall,children:"Items Count"}),t.jsx(e,{style:s.colSmall,children:"Quantity"}),t.jsx(e,{style:s.colSmall,children:"Total"})]}),(w=o==null?void 0:o.data)==null?void 0:w.map((l,c)=>{var a,r,d,x;const y=(a=l==null?void 0:l.cart_items)==null?void 0:a.reduce((f,h)=>f+Number(h.quantity),0),i=(r=l==null?void 0:l.cart_items)==null?void 0:r.reduce((f,h)=>f+Number(h.fixed_price)*h.quantity,0);return console.log("itttttss",(d=l==null?void 0:l.customer)==null?void 0:d.name),t.jsxs(n,{style:s.tableRow,children:[t.jsx(e,{style:s.colSmall,children:c+1}),t.jsx(e,{style:s.colSmall,children:P(l==null?void 0:l.date).format("LL")}),t.jsx(e,{style:s.colSmall,children:l.cart_id}),t.jsx(e,{style:s.colSmall,children:((x=l==null?void 0:l.customer)==null?void 0:x.name)??"Walk-In Customer"}),t.jsx(e,{style:s.colSmall,children:l==null?void 0:l.cart_items.length}),t.jsx(e,{style:s.colSmall,children:y}),t.jsx(e,{style:s.colSmall,children:p(i)})]},c)}),t.jsx(n,{style:s.summary,children:t.jsxs(e,{children:[" Total: ",p(b)]})})]})})})};export{V as default};
